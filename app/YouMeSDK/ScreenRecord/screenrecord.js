module.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=34)}([function(e,t){e.exports=require("util")},function(e,t){e.exports=require("path")},function(e,t,n){"use strict";"undefined"==typeof process||"renderer"===process.type||!0===process.browser||process.__nwjs?e.exports=n(37):e.exports=n(39)},function(e,t,n){"use strict";const r=n(0),o=n(2)("log4js:configuration"),i=[],s=e=>!e,a=e=>e&&"object"==typeof e&&!Array.isArray(e),u=(e,t,n)=>{(Array.isArray(t)?t:[t]).forEach(t=>{if(t)throw new Error(`Problem with log4js configuration: (${r.inspect(e,{depth:5})})`+` - ${n}`)})};e.exports={configure:e=>{o("New configuration to be validated: ",e),u(e,s(a(e)),"must be an object."),o(`Calling configuration listeners (${i.length})`),i.forEach(t=>t(e)),o("Configuration finished.")},addListener:e=>{i.push(e),o(`Added listener, listeners now ${i.length}`)},throwExceptionIf:u,anObject:a,anInteger:e=>e&&"number"==typeof e&&Number.isInteger(e),validIdentifier:e=>/^[A-Za-z][A-Za-z0-9_]*$/g.test(e),not:s}},function(e,t,n){"use strict";const r=n(3),o=["white","grey","black","blue","cyan","green","magenta","red","yellow"];class i{constructor(e,t,n){this.level=e,this.levelStr=t,this.colour=n}toString(){return this.levelStr}static getLevel(e,t){return e?e instanceof i?e:(e instanceof Object&&e.levelStr&&(e=e.levelStr),"string"==typeof e?i[e.toUpperCase()]||t:i.getLevel(e.toString())):t}static addLevels(e){if(e){Object.keys(e).forEach(t=>{i[t.toUpperCase()]=new i(e[t].value,t.toUpperCase(),e[t].colour),i.levels.push(i[t.toUpperCase()])}),i.levels.sort((e,t)=>e.level-t.level)}}isLessThanOrEqualTo(e){return"string"==typeof e&&(e=i.getLevel(e)),this.level<=e.level}isGreaterThanOrEqualTo(e){return"string"==typeof e&&(e=i.getLevel(e)),this.level>=e.level}isEqualTo(e){return"string"==typeof e&&(e=i.getLevel(e)),this.level===e.level}}i.levels=[],i.addLevels({ALL:{value:Number.MIN_VALUE,colour:"grey"},TRACE:{value:5e3,colour:"blue"},DEBUG:{value:1e4,colour:"cyan"},INFO:{value:2e4,colour:"green"},WARN:{value:3e4,colour:"yellow"},ERROR:{value:4e4,colour:"red"},FATAL:{value:5e4,colour:"magenta"},MARK:{value:9007199254740992,colour:"grey"},OFF:{value:Number.MAX_VALUE,colour:"grey"}}),r.addListener(e=>{const t=e.levels;if(t){r.throwExceptionIf(e,r.not(r.anObject(t)),"levels must be an object"),Object.keys(t).forEach(n=>{r.throwExceptionIf(e,r.not(r.validIdentifier(n)),`level name "${n}" is not a valid identifier (must start with a letter, only contain A-Z,a-z,0-9,_)`),r.throwExceptionIf(e,r.not(r.anObject(t[n])),`level "${n}" must be an object`),r.throwExceptionIf(e,r.not(t[n].value),`level "${n}" must have a 'value' property`),r.throwExceptionIf(e,r.not(r.anInteger(t[n].value)),`level "${n}".value must have an integer value`),r.throwExceptionIf(e,r.not(t[n].colour),`level "${n}" must have a 'colour' property`),r.throwExceptionIf(e,r.not(o.indexOf(t[n].colour)>-1),`level "${n}".colour must be one of ${o.join(", ")}`)})}}),r.addListener(e=>{i.addLevels(e.levels)}),e.exports=i},function(e,t,n){"use strict";var r=n(11),o=Object.keys||function(e){var t=[];for(var n in e)t.push(n);return t};e.exports=f;var i=n(7);i.inherits=n(8);var s=n(27),a=n(30);i.inherits(f,s);for(var u=o(a.prototype),c=0;c<u.length;c++){var l=u[c];f.prototype[l]||(f.prototype[l]=a.prototype[l])}function f(e){if(!(this instanceof f))return new f(e);s.call(this,e),a.call(this,e),e&&!1===e.readable&&(this.readable=!1),e&&!1===e.writable&&(this.writable=!1),this.allowHalfOpen=!0,e&&!1===e.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",d)}function d(){this.allowHalfOpen||this._writableState.ended||r.nextTick(p,this)}function p(e){e.end()}Object.defineProperty(f.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(f.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}}),f.prototype._destroy=function(e,t){this.push(null),this.end(),r.nextTick(t,e)}},function(e,t){e.exports=require("fs")},function(e,t){function n(e){return Object.prototype.toString.call(e)}t.isArray=function(e){return Array.isArray?Array.isArray(e):"[object Array]"===n(e)},t.isBoolean=function(e){return"boolean"==typeof e},t.isNull=function(e){return null===e},t.isNullOrUndefined=function(e){return null==e},t.isNumber=function(e){return"number"==typeof e},t.isString=function(e){return"string"==typeof e},t.isSymbol=function(e){return"symbol"==typeof e},t.isUndefined=function(e){return void 0===e},t.isRegExp=function(e){return"[object RegExp]"===n(e)},t.isObject=function(e){return"object"==typeof e&&null!==e},t.isDate=function(e){return"[object Date]"===n(e)},t.isError=function(e){return"[object Error]"===n(e)||e instanceof Error},t.isFunction=function(e){return"function"==typeof e},t.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e},t.isBuffer=Buffer.isBuffer},function(e,t,n){try{var r=n(0);if("function"!=typeof r.inherits)throw"";e.exports=r.inherits}catch(t){e.exports=n(58)}},function(e,t){e.exports=require("os")},function(e,t){e.exports=require("electron")},function(e,t,n){"use strict";!process.version||0===process.version.indexOf("v0.")||0===process.version.indexOf("v1.")&&0!==process.version.indexOf("v1.8.")?e.exports={nextTick:function(e,t,n,r){if("function"!=typeof e)throw new TypeError('"callback" argument must be a function');var o,i,s=arguments.length;switch(s){case 0:case 1:return process.nextTick(e);case 2:return process.nextTick(function(){e.call(null,t)});case 3:return process.nextTick(function(){e.call(null,t,n)});case 4:return process.nextTick(function(){e.call(null,t,n,r)});default:for(o=new Array(s-1),i=0;i<o.length;)o[i++]=arguments[i];return process.nextTick(function(){e.apply(null,o)})}}}:e.exports=process},function(e,t,n){var r=n(57),o=r.Buffer;function i(e,t){for(var n in e)t[n]=e[n]}function s(e,t,n){return o(e,t,n)}o.from&&o.alloc&&o.allocUnsafe&&o.allocUnsafeSlow?e.exports=r:(i(r,t),t.Buffer=s),i(o,s),s.from=function(e,t,n){if("number"==typeof e)throw new TypeError("Argument must not be a number");return o(e,t,n)},s.alloc=function(e,t,n){if("number"!=typeof e)throw new TypeError("Argument must be a number");var r=o(e);return void 0!==t?"string"==typeof n?r.fill(t,n):r.fill(t):r.fill(0),r},s.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return o(e)},s.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return r.SlowBuffer(e)}},function(e,t,n){const r=n(2)("log4js:clustering"),o=n(22),i=n(3),s=n(42),a=[];let u=!1,c=!1,l="NODE_APP_INSTANCE";const f=()=>c&&"0"===process.env[l],d=()=>u||s.isMaster||f(),p=e=>{a.forEach(t=>t(e))},h=(e,t)=>{if(r("cluster message received from worker ",e,": ",t),e.topic&&e.data&&(t=e,e=void 0),t&&t.topic&&"log4js:message"===t.topic){r("received message: ",t.data);const e=o.deserialise(t.data);p(e)}};i.addListener(e=>{a.length=0,u=e.disableClustering,c=e.pm2,l=e.pm2InstanceVar||"NODE_APP_INSTANCE",r(`clustering disabled ? ${u}`),r(`cluster.isMaster ? ${s.isMaster}`),r(`pm2 enabled ? ${c}`),r(`pm2InstanceVar = ${l}`),r(`process.env[${l}] = ${process.env[l]}`),c&&process.removeListener("message",h),s.removeListener&&s.removeListener("message",h),e.disableClustering?r("Not listening for cluster messages, because clustering disabled."):f()?(r("listening for PM2 broadcast messages"),process.on("message",h)):s.isMaster?(r("listening for cluster messages"),s.on("message",h)):r("not listening for messages, because we are not a master process")}),e.exports={onlyOnMaster:(e,t)=>d()?e():t,isMaster:d,send:e=>{d()?p(e):(c||(e.cluster={workerId:s.worker.id,worker:process.pid}),process.send({topic:"log4js:message",data:e.serialise()}))},onMessage:e=>{a.push(e)}}},function(e,t,n){"use strict";"undefined"==typeof process||"renderer"===process.type||!0===process.browser||process.__nwjs?e.exports=n(50):e.exports=n(52)},function(e,t){e.exports=require("child_process")},function(e,t,n){"use strict";e.exports=function(e){function t(e){for(var t=0,n=0;n<e.length;n++)t=(t<<5)-t+e.charCodeAt(n),t|=0;return r.colors[Math.abs(t)%r.colors.length]}function r(e){var n;function s(){if(s.enabled){for(var e=arguments.length,t=new Array(e),o=0;o<e;o++)t[o]=arguments[o];var i=s,a=Number(new Date),u=a-(n||a);i.diff=u,i.prev=n,i.curr=a,n=a,t[0]=r.coerce(t[0]),"string"!=typeof t[0]&&t.unshift("%O");var c=0;t[0]=t[0].replace(/%([a-zA-Z%])/g,function(e,n){if("%%"===e)return e;c++;var o=r.formatters[n];if("function"==typeof o){var s=t[c];e=o.call(i,s),t.splice(c,1),c--}return e}),r.formatArgs.call(i,t),(i.log||r.log).apply(i,t)}}return s.namespace=e,s.enabled=r.enabled(e),s.useColors=r.useColors(),s.color=t(e),s.destroy=o,s.extend=i,"function"==typeof r.init&&r.init(s),r.instances.push(s),s}function o(){var e=r.instances.indexOf(this);return-1!==e&&(r.instances.splice(e,1),!0)}function i(e,t){return r(this.namespace+(void 0===t?":":t)+e)}return r.debug=r,r.default=r,r.coerce=function(e){return e instanceof Error?e.stack||e.message:e},r.disable=function(){r.enable("")},r.enable=function(e){var t;r.save(e),r.names=[],r.skips=[];var n=("string"==typeof e?e:"").split(/[\s,]+/),o=n.length;for(t=0;t<o;t++)n[t]&&("-"===(e=n[t].replace(/\*/g,".*?"))[0]?r.skips.push(new RegExp("^"+e.substr(1)+"$")):r.names.push(new RegExp("^"+e+"$")));for(t=0;t<r.instances.length;t++){var i=r.instances[t];i.enabled=r.enabled(i.namespace)}},r.enabled=function(e){if("*"===e[e.length-1])return!0;var t,n;for(t=0,n=r.skips.length;t<n;t++)if(r.skips[t].test(e))return!1;for(t=0,n=r.names.length;t<n;t++)if(r.names[t].test(e))return!0;return!1},r.humanize=n(38),Object.keys(e).forEach(function(t){r[t]=e[t]}),r.instances=[],r.names=[],r.skips=[],r.formatters={},r.selectColor=t,r.enable(r.load()),r}},function(e,t){e.exports=require("tty")},function(e,t,n){"use strict";var r=process.argv,o=r.indexOf("--"),i=function(e){e="--"+e;var t=r.indexOf(e);return-1!==t&&(-1===o||t<o)};e.exports="FORCE_COLOR"in process.env||!(i("no-color")||i("no-colors")||i("color=false"))&&(!!(i("color")||i("colors")||i("color=true")||i("color=always"))||!(process.stdout&&!process.stdout.isTTY)&&("win32"===process.platform||"COLORTERM"in process.env||"dumb"!==process.env.TERM&&!!/^screen|^xterm|^vt100|color|ansi|cygwin|linux/i.test(process.env.TERM)))},function(e,t,n){"use strict";const r=n(20),o=n(9),i=n(0),s=o.EOL||"\n",a={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[90,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[91,39],yellow:[33,39]};function u(e){return e?`[${a[e][0]}m`:""}function c(e){return e?`[${a[e][1]}m`:""}function l(e,t,n){return function(e,t){return u(t)+e+c(t)}(i.format("[%s] [%s] %s - ",r.asString(e.startTime,n),e.level,e.categoryName),t)}function f(e,t){return l(e,void 0,t)+i.format(...e.data)}function d(e,t){return l(e,e.level.colour,t)+i.format(...e.data)}function p(e){return i.format(...e.data)}function h(e){return e.data[0]}function g(e,t,n){const a=/%(-?[0-9]+)?(\.?[0-9]+)?([[\]cdhmnprzxXy%])(\{([^}]+)\})?|([^%]+)/;function l(e){return e&&e.pid?e.pid.toString():process.pid.toString()}e=e||"%r %p %c - %m%n";const f={c:function(e,t){let n=e.categoryName;if(t){const e=parseInt(t,10),r=n.split(".");e<r.length&&(n=r.slice(r.length-e).join("."))}return n},d:function(e,t){let o=r.ISO8601_FORMAT;return t&&("ISO8601"===(o=t)?o=r.ISO8601_FORMAT:"ISO8601_WITH_TZ_OFFSET"===o?o=r.ISO8601_WITH_TZ_OFFSET_FORMAT:"ABSOLUTE"===o?o=r.ABSOLUTETIME_FORMAT:"DATE"===o&&(o=r.DATETIME_FORMAT)),r.asString(o,e.startTime,n)},h:function(){return o.hostname().toString()},m:function(e){return i.format(...e.data)},n:function(){return s},p:function(e){return e.level.toString()},r:function(e){return r.asString("hh:mm:ss",e.startTime,n)},"[":function(e){return u(e.level.colour)},"]":function(e){return c(e.level.colour)},y:function(){return l()},z:l,"%":function(){return"%"},x:function(e,n){return void 0!==t[n]?"function"==typeof t[n]?t[n](e):t[n]:null},X:function(e,t){const n=e.context[t];return void 0!==n?"function"==typeof n?n(e):n:null}};function d(e,t,n){return f[e](t,n)}function p(e,t,n){let r=e;return r=function(e,t){let n;if(e)if("-"===e.charAt(0))for(n=parseInt(e.substr(1),10);t.length<n;)t+=" ";else for(n=parseInt(e,10);t.length<n;)t=` ${t}`;return t}(n,r=function(e,t){let n;return e?(n=parseInt(e.substr(1),10),t.substring(0,n)):t}(t,r))}return function(t){let n,r="",o=e;for(;null!==(n=a.exec(o));){const e=n[1],i=n[2],s=n[3],a=n[5],u=n[6];if(u)r+=u.toString();else{r+=p(d(s,t,a),i,e)}o=o.substr(n.index+n[0].length)}return r}}const m={messagePassThrough:function(){return p},basic:function(){return f},colored:function(){return d},coloured:function(){return d},pattern:function(e){return g(e&&e.pattern,e&&e.tokens)},dummy:function(){return h}};e.exports={basicLayout:f,messagePassThroughLayout:p,patternLayout:g,colouredLayout:d,coloredLayout:d,dummyLayout:h,addLayout:function(e,t){m[e]=t},layout:function(e,t){return m[e]&&m[e](t)}}},function(e,t,n){"use strict";function r(e,t){for(var n=e.toString();n.length<t;)n="0"+n;return n}function o(e){return r(e,2)}function i(t,n,i){"string"!=typeof t&&(i=n,n=t,t=e.exports.ISO8601_FORMAT),n||(n=new Date),void 0===i&&(i=n.getTimezoneOffset()),n.setUTCMinutes(n.getUTCMinutes()-i);var s=o(n.getUTCDate()),a=o(n.getUTCMonth()+1),u=o(n.getUTCFullYear()),c=o(n.getUTCFullYear().toString().substring(2,4)),l=t.indexOf("yyyy")>-1?u:c,f=o(n.getUTCHours()),d=o(n.getUTCMinutes()),p=o(n.getUTCSeconds()),h=r(n.getUTCMilliseconds(),3),g=function(e){var t=Math.abs(e),n=String(Math.floor(t/60)),r=String(t%60);return 1===n.length&&(n="0"+n),1===r.length&&(r="0"+r),e<0?"+"+n+r:"-"+n+r}(i);return n.setUTCMinutes(n.getUTCMinutes()+i),t.replace(/dd/g,s).replace(/MM/g,a).replace(/y{1,4}/g,l).replace(/hh/g,f).replace(/mm/g,d).replace(/ss/g,p).replace(/SSS/g,h).replace(/O/g,g)}e.exports=i,e.exports.asString=i,e.exports.ISO8601_FORMAT="yyyy-MM-ddThh:mm:ss.SSS",e.exports.ISO8601_WITH_TZ_OFFSET_FORMAT="yyyy-MM-ddThh:mm:ss.SSSO",e.exports.DATETIME_FORMAT="dd MM yyyy hh:mm:ss.SSS",e.exports.ABSOLUTETIME_FORMAT="hh:mm:ss.SSS"},function(e,t,n){const r=n(1),o=n(2)("log4js:appenders"),i=n(3),s=n(13),a=n(4),u=n(19),c=n(43),l=new Map;l.set("console",n(44)),l.set("stdout",n(45)),l.set("stderr",n(46)),l.set("file",n(47)),l.set("dateFile",n(63));const f=new Map,d=(e,t)=>{o("Loading module from ",e);try{return n(64)(e)}catch(n){return void i.throwExceptionIf(t,"MODULE_NOT_FOUND"!==n.code,`appender "${e}" could not be loaded (error was: ${n})`)}},p=(e,t)=>{const p=t.appenders[e],h=((e,t)=>l.get(e)||d(`./${e}`,t)||d(e,t)||n.c[n.s]&&d(r.join(r.dirname(n.c[n.s].filename),e),t)||d(r.join(process.cwd(),e),t))(p.type,t);return i.throwExceptionIf(t,i.not(h),`appender "${e}" is not valid (type "${p.type}" could not be found)`),h.appender&&o(`DEPRECATION: Appender ${p.type} exports an appender function.`),h.shutdown&&o(`DEPRECATION: Appender ${p.type} exports a shutdown function.`),o(`${e}: clustering.isMaster ? ${s.isMaster()}`),o(`${e}: appenderModule is ${n(0).inspect(h)}`),s.onlyOnMaster(()=>(o(`calling appenderModule.configure for ${e} / ${p.type}`),h.configure(c.modifyConfig(p),u,e=>f.get(e),a)),()=>{})},h=e=>{f.clear(),Object.keys(e.appenders).forEach(t=>{o(`Creating appender ${t}`),f.set(t,p(t,e))})};h({appenders:{out:{type:"stdout"}}}),i.addListener(e=>{i.throwExceptionIf(e,i.not(i.anObject(e.appenders)),'must have a property "appenders" of type object.');const t=Object.keys(e.appenders);i.throwExceptionIf(e,i.not(t.length),"must define at least one appender."),t.forEach(t=>{i.throwExceptionIf(e,i.not(e.appenders[t].type),`appender "${t}" is not valid (must be an object with property "type")`)})}),i.addListener(h),e.exports=f},function(e,t,n){const r=n(41),o=n(4);class i{constructor(e,t,n,r){this.startTime=new Date,this.categoryName=e,this.data=n,this.level=t,this.context=Object.assign({},r),this.pid=process.pid}serialise(){const e=this.data.map(e=>(e&&e.message&&e.stack&&(e=Object.assign({message:e.message,stack:e.stack},e)),e));return this.data=e,r.stringify(this)}static deserialise(e){let t;try{const n=r.parse(e);n.data=n.data.map(e=>{if(e&&e.message&&e.stack){const t=new Error(e);Object.keys(e).forEach(n=>{t[n]=e[n]}),e=t}return e}),(t=new i(n.categoryName,o.getLevel(n.level.levelStr),n.data,n.context)).startTime=new Date(n.startTime),t.pid=n.pid,t.cluster=n.cluster}catch(n){t=new i("log4js",o.ERROR,["Unable to parse log:",e,"because: ",n])}return t}}e.exports=i},function(e,t,n){"use strict";t.RollingFileStream=n(48),t.DateRollingFileStream=n(62)},function(e,t,n){"use strict";var r=n(6),o=n(49),i=n(14)("streamroller:BaseRollingFileStream"),s=n(53),a=n(1),u=n(0),c=n(54);function l(e,t){i("In BaseRollingFileStream"),this.filename=e,this.options=t||{},this.options.encoding=this.options.encoding||"utf8",this.options.mode=this.options.mode||parseInt("0644",8),this.options.flags=this.options.flags||"a",this.currentSize=0,function(){if(!e)throw new Error("You must specify a filename")}(),i("Calling BaseRollingFileStream.super"),l.super_.call(this),this.openTheStream(),this.currentSize=function(e){var t=0;try{t=r.statSync(e).size}catch(e){}return t}(this.filename)}e.exports=l,u.inherits(l,c.Writable),l.prototype._writeTheChunk=function(e,t,n){i("writing the chunk to the underlying stream"),this.currentSize+=e.length;try{this.theStream.write(e,t)?process.nextTick(n):(i("waiting for drain event"),this.theStream.once("drain",n)),i("chunk written")}catch(e){i(e),n&&n(e)}},l.prototype._write=function(e,t,n){i("in _write"),this.shouldRoll()?(this.currentSize=0,this.roll(this.filename,this._writeTheChunk.bind(this,e,t,n))):this._writeTheChunk(e,t,n)},l.prototype.openTheStream=function(e){i("opening the underlying stream");var t=this;s.sync(a.dirname(this.filename)),this.theStream=r.createWriteStream(this.filename,this.options),this.theStream.on("error",function(e){t.emit("error",e)}),e&&this.theStream.on("open",e)},l.prototype.closeTheStream=function(e){i("closing the underlying stream"),this.theStream.end(e)},l.prototype.compress=function(e,t){i("Compressing ",e," -> ",e,".gz");var n=o.createGzip(),s=r.createReadStream(e),a=r.createWriteStream(e+".gz");s.pipe(n).pipe(a),a.on("finish",function(n){i("Removing original ",e),r.unlink(e,t)})},l.prototype.shouldRoll=function(){return!1},l.prototype.roll=function(e,t){t()},l.prototype.end=function(e,t,n){var r=this;i("end called - first close myself"),c.Writable.prototype.end.call(r,function(){i("writable end callback, now close underlying stream"),r.theStream.end(e,t,function(e){i("underlying stream closed"),n&&n(e)})})}},function(e,t,n){"use strict";e.exports=function(e){function t(e){for(var t=0,n=0;n<e.length;n++)t=(t<<5)-t+e.charCodeAt(n),t|=0;return r.colors[Math.abs(t)%r.colors.length]}function r(e){var n;function s(){if(s.enabled){for(var e=arguments.length,t=new Array(e),o=0;o<e;o++)t[o]=arguments[o];var i=s,a=Number(new Date),u=a-(n||a);i.diff=u,i.prev=n,i.curr=a,n=a,t[0]=r.coerce(t[0]),"string"!=typeof t[0]&&t.unshift("%O");var c=0;t[0]=t[0].replace(/%([a-zA-Z%])/g,function(e,n){if("%%"===e)return e;c++;var o=r.formatters[n];if("function"==typeof o){var s=t[c];e=o.call(i,s),t.splice(c,1),c--}return e}),r.formatArgs.call(i,t),(i.log||r.log).apply(i,t)}}return s.namespace=e,s.enabled=r.enabled(e),s.useColors=r.useColors(),s.color=t(e),s.destroy=o,s.extend=i,"function"==typeof r.init&&r.init(s),r.instances.push(s),s}function o(){var e=r.instances.indexOf(this);return-1!==e&&(r.instances.splice(e,1),!0)}function i(e,t){return r(this.namespace+(void 0===t?":":t)+e)}return r.debug=r,r.default=r,r.coerce=function(e){return e instanceof Error?e.stack||e.message:e},r.disable=function(){r.enable("")},r.enable=function(e){var t;r.save(e),r.names=[],r.skips=[];var n=("string"==typeof e?e:"").split(/[\s,]+/),o=n.length;for(t=0;t<o;t++)n[t]&&("-"===(e=n[t].replace(/\*/g,".*?"))[0]?r.skips.push(new RegExp("^"+e.substr(1)+"$")):r.names.push(new RegExp("^"+e+"$")));for(t=0;t<r.instances.length;t++){var i=r.instances[t];i.enabled=r.enabled(i.namespace)}},r.enabled=function(e){if("*"===e[e.length-1])return!0;var t,n;for(t=0,n=r.skips.length;t<n;t++)if(r.skips[t].test(e))return!1;for(t=0,n=r.names.length;t<n;t++)if(r.names[t].test(e))return!0;return!1},r.humanize=n(51),Object.keys(e).forEach(function(t){r[t]=e[t]}),r.instances=[],r.names=[],r.skips=[],r.formatters={},r.selectColor=t,r.enable(r.load()),r}},function(e,t){e.exports=require("stream")},function(e,t,n){"use strict";var r=n(11);e.exports=b;var o,i=n(55);b.ReadableState=y;n(56).EventEmitter;var s=function(e,t){return e.listeners(t).length},a=n(28),u=n(12).Buffer,c=global.Uint8Array||function(){};var l=n(7);l.inherits=n(8);var f=n(0),d=void 0;d=f&&f.debuglog?f.debuglog("stream"):function(){};var p,h=n(59),g=n(29);l.inherits(b,a);var m=["error","close","destroy","pause","resume"];function y(e,t){o=o||n(5),e=e||{};var r=t instanceof o;this.objectMode=!!e.objectMode,r&&(this.objectMode=this.objectMode||!!e.readableObjectMode);var i=e.highWaterMark,s=e.readableHighWaterMark,a=this.objectMode?16:16384;this.highWaterMark=i||0===i?i:r&&(s||0===s)?s:a,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new h,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(p||(p=n(31).StringDecoder),this.decoder=new p(e.encoding),this.encoding=e.encoding)}function b(e){if(o=o||n(5),!(this instanceof b))return new b(e);this._readableState=new y(e,this),this.readable=!0,e&&("function"==typeof e.read&&(this._read=e.read),"function"==typeof e.destroy&&(this._destroy=e.destroy)),a.call(this)}function v(e,t,n,r,o){var i,s=e._readableState;null===t?(s.reading=!1,function(e,t){if(t.ended)return;if(t.decoder){var n=t.decoder.end();n&&n.length&&(t.buffer.push(n),t.length+=t.objectMode?1:n.length)}t.ended=!0,x(e)}(e,s)):(o||(i=function(e,t){var n;(function(e){return u.isBuffer(e)||e instanceof c})(t)||"string"==typeof t||void 0===t||e.objectMode||(n=new TypeError("Invalid non-string/buffer chunk"));return n}(s,t)),i?e.emit("error",i):s.objectMode||t&&t.length>0?("string"==typeof t||s.objectMode||Object.getPrototypeOf(t)===u.prototype||(t=function(e){return u.from(e)}(t)),r?s.endEmitted?e.emit("error",new Error("stream.unshift() after end event")):w(e,s,t,!0):s.ended?e.emit("error",new Error("stream.push() after EOF")):(s.reading=!1,s.decoder&&!n?(t=s.decoder.write(t),s.objectMode||0!==t.length?w(e,s,t,!1):F(e,s)):w(e,s,t,!1))):r||(s.reading=!1));return function(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||0===e.length)}(s)}function w(e,t,n,r){t.flowing&&0===t.length&&!t.sync?(e.emit("data",n),e.read(0)):(t.length+=t.objectMode?1:n.length,r?t.buffer.unshift(n):t.buffer.push(n),t.needReadable&&x(e)),F(e,t)}Object.defineProperty(b.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),b.prototype.destroy=g.destroy,b.prototype._undestroy=g.undestroy,b.prototype._destroy=function(e,t){this.push(null),t(e)},b.prototype.push=function(e,t){var n,r=this._readableState;return r.objectMode?n=!0:"string"==typeof e&&((t=t||r.defaultEncoding)!==r.encoding&&(e=u.from(e,t),t=""),n=!0),v(this,e,t,!1,n)},b.prototype.unshift=function(e){return v(this,e,null,!0,!1)},b.prototype.isPaused=function(){return!1===this._readableState.flowing},b.prototype.setEncoding=function(e){return p||(p=n(31).StringDecoder),this._readableState.decoder=new p(e),this._readableState.encoding=e,this};var C=8388608;function S(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!=e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=function(e){return e>=C?e=C:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function x(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(d("emitReadable",t.flowing),t.emittedReadable=!0,t.sync?r.nextTick(_,e):_(e))}function _(e){d("emit readable"),e.emit("readable"),T(e)}function F(e,t){t.readingMore||(t.readingMore=!0,r.nextTick(k,e,t))}function k(e,t){for(var n=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(d("maybeReadMore read 0"),e.read(0),n!==t.length);)n=t.length;t.readingMore=!1}function E(e){d("readable nexttick read 0"),e.read(0)}function O(e,t){t.reading||(d("resume read 0"),e.read(0)),t.resumeScheduled=!1,t.awaitDrain=0,e.emit("resume"),T(e),t.flowing&&!t.reading&&e.read(0)}function T(e){var t=e._readableState;for(d("flow",t.flowing);t.flowing&&null!==e.read(););}function M(e,t){return 0===t.length?null:(t.objectMode?n=t.buffer.shift():!e||e>=t.length?(n=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.head.data:t.buffer.concat(t.length),t.buffer.clear()):n=function(e,t,n){var r;e<t.head.data.length?(r=t.head.data.slice(0,e),t.head.data=t.head.data.slice(e)):r=e===t.head.data.length?t.shift():n?function(e,t){var n=t.head,r=1,o=n.data;e-=o.length;for(;n=n.next;){var i=n.data,s=e>i.length?i.length:e;if(s===i.length?o+=i:o+=i.slice(0,e),0===(e-=s)){s===i.length?(++r,n.next?t.head=n.next:t.head=t.tail=null):(t.head=n,n.data=i.slice(s));break}++r}return t.length-=r,o}(e,t):function(e,t){var n=u.allocUnsafe(e),r=t.head,o=1;r.data.copy(n),e-=r.data.length;for(;r=r.next;){var i=r.data,s=e>i.length?i.length:e;if(i.copy(n,n.length-e,0,s),0===(e-=s)){s===i.length?(++o,r.next?t.head=r.next:t.head=t.tail=null):(t.head=r,r.data=i.slice(s));break}++o}return t.length-=o,n}(e,t);return r}(e,t.buffer,t.decoder),n);var n}function j(e){var t=e._readableState;if(t.length>0)throw new Error('"endReadable()" called on non-empty stream');t.endEmitted||(t.ended=!0,r.nextTick(R,t,e))}function R(e,t){e.endEmitted||0!==e.length||(e.endEmitted=!0,t.readable=!1,t.emit("end"))}function A(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1}b.prototype.read=function(e){d("read",e),e=parseInt(e,10);var t=this._readableState,n=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return d("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?j(this):x(this),null;if(0===(e=S(e,t))&&t.ended)return 0===t.length&&j(this),null;var r,o=t.needReadable;return d("need readable",o),(0===t.length||t.length-e<t.highWaterMark)&&d("length less than watermark",o=!0),t.ended||t.reading?d("reading or ended",o=!1):o&&(d("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=S(n,t))),null===(r=e>0?M(e,t):null)?(t.needReadable=!0,e=0):t.length-=e,0===t.length&&(t.ended||(t.needReadable=!0),n!==e&&t.ended&&j(this)),null!==r&&this.emit("data",r),r},b.prototype._read=function(e){this.emit("error",new Error("_read() is not implemented"))},b.prototype.pipe=function(e,t){var n=this,o=this._readableState;switch(o.pipesCount){case 0:o.pipes=e;break;case 1:o.pipes=[o.pipes,e];break;default:o.pipes.push(e)}o.pipesCount+=1,d("pipe count=%d opts=%j",o.pipesCount,t);var a=(!t||!1!==t.end)&&e!==process.stdout&&e!==process.stderr?c:b;function u(t,r){d("onunpipe"),t===n&&r&&!1===r.hasUnpiped&&(r.hasUnpiped=!0,d("cleanup"),e.removeListener("close",m),e.removeListener("finish",y),e.removeListener("drain",l),e.removeListener("error",g),e.removeListener("unpipe",u),n.removeListener("end",c),n.removeListener("end",b),n.removeListener("data",h),f=!0,!o.awaitDrain||e._writableState&&!e._writableState.needDrain||l())}function c(){d("onend"),e.end()}o.endEmitted?r.nextTick(a):n.once("end",a),e.on("unpipe",u);var l=function(e){return function(){var t=e._readableState;d("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&s(e,"data")&&(t.flowing=!0,T(e))}}(n);e.on("drain",l);var f=!1;var p=!1;function h(t){d("ondata"),p=!1,!1!==e.write(t)||p||((1===o.pipesCount&&o.pipes===e||o.pipesCount>1&&-1!==A(o.pipes,e))&&!f&&(d("false write response, pause",n._readableState.awaitDrain),n._readableState.awaitDrain++,p=!0),n.pause())}function g(t){d("onerror",t),b(),e.removeListener("error",g),0===s(e,"error")&&e.emit("error",t)}function m(){e.removeListener("finish",y),b()}function y(){d("onfinish"),e.removeListener("close",m),b()}function b(){d("unpipe"),n.unpipe(e)}return n.on("data",h),function(e,t,n){if("function"==typeof e.prependListener)return e.prependListener(t,n);e._events&&e._events[t]?i(e._events[t])?e._events[t].unshift(n):e._events[t]=[n,e._events[t]]:e.on(t,n)}(e,"error",g),e.once("close",m),e.once("finish",y),e.emit("pipe",n),o.flowing||(d("pipe resume"),n.resume()),e},b.prototype.unpipe=function(e){var t=this._readableState,n={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes?this:(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,n),this);if(!e){var r=t.pipes,o=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var i=0;i<o;i++)r[i].emit("unpipe",this,n);return this}var s=A(t.pipes,e);return-1===s?this:(t.pipes.splice(s,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,n),this)},b.prototype.on=function(e,t){var n=a.prototype.on.call(this,e,t);if("data"===e)!1!==this._readableState.flowing&&this.resume();else if("readable"===e){var o=this._readableState;o.endEmitted||o.readableListening||(o.readableListening=o.needReadable=!0,o.emittedReadable=!1,o.reading?o.length&&x(this):r.nextTick(E,this))}return n},b.prototype.addListener=b.prototype.on,b.prototype.resume=function(){var e=this._readableState;return e.flowing||(d("resume"),e.flowing=!0,function(e,t){t.resumeScheduled||(t.resumeScheduled=!0,r.nextTick(O,e,t))}(this,e)),this},b.prototype.pause=function(){return d("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(d("pause"),this._readableState.flowing=!1,this.emit("pause")),this},b.prototype.wrap=function(e){var t=this,n=this._readableState,r=!1;for(var o in e.on("end",function(){if(d("wrapped end"),n.decoder&&!n.ended){var e=n.decoder.end();e&&e.length&&t.push(e)}t.push(null)}),e.on("data",function(o){(d("wrapped data"),n.decoder&&(o=n.decoder.write(o)),!n.objectMode||null!==o&&void 0!==o)&&((n.objectMode||o&&o.length)&&(t.push(o)||(r=!0,e.pause())))}),e)void 0===this[o]&&"function"==typeof e[o]&&(this[o]=function(t){return function(){return e[t].apply(e,arguments)}}(o));for(var i=0;i<m.length;i++)e.on(m[i],this.emit.bind(this,m[i]));return this._read=function(t){d("wrapped _read",t),r&&(r=!1,e.resume())},this},Object.defineProperty(b.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),b._fromList=M},function(e,t,n){e.exports=n(26)},function(e,t,n){"use strict";var r=n(11);function o(e,t){e.emit("error",t)}e.exports={destroy:function(e,t){var n=this,i=this._readableState&&this._readableState.destroyed,s=this._writableState&&this._writableState.destroyed;return i||s?(t?t(e):!e||this._writableState&&this._writableState.errorEmitted||r.nextTick(o,this,e),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,function(e){!t&&e?(r.nextTick(o,n,e),n._writableState&&(n._writableState.errorEmitted=!0)):t&&t(e)}),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}}},function(e,t,n){"use strict";var r=n(11);function o(e){var t=this;this.next=null,this.entry=null,this.finish=function(){!function(e,t,n){var r=e.entry;e.entry=null;for(;r;){var o=r.callback;t.pendingcb--,o(n),r=r.next}t.corkedRequestsFree?t.corkedRequestsFree.next=e:t.corkedRequestsFree=e}(t,e)}}e.exports=m;var i,s=!process.browser&&["v0.10","v0.9."].indexOf(process.version.slice(0,5))>-1?setImmediate:r.nextTick;m.WritableState=g;var a=n(7);a.inherits=n(8);var u={deprecate:n(60)},c=n(28),l=n(12).Buffer,f=global.Uint8Array||function(){};var d,p=n(29);function h(){}function g(e,t){i=i||n(5),e=e||{};var a=t instanceof i;this.objectMode=!!e.objectMode,a&&(this.objectMode=this.objectMode||!!e.writableObjectMode);var u=e.highWaterMark,c=e.writableHighWaterMark,l=this.objectMode?16:16384;this.highWaterMark=u||0===u?u:a&&(c||0===c)?c:l,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var f=!1===e.decodeStrings;this.decodeStrings=!f,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){!function(e,t){var n=e._writableState,o=n.sync,i=n.writecb;if(function(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}(n),t)!function(e,t,n,o,i){--t.pendingcb,n?(r.nextTick(i,o),r.nextTick(S,e,t),e._writableState.errorEmitted=!0,e.emit("error",o)):(i(o),e._writableState.errorEmitted=!0,e.emit("error",o),S(e,t))}(e,n,o,t,i);else{var a=w(n);a||n.corked||n.bufferProcessing||!n.bufferedRequest||v(e,n),o?s(b,e,n,a,i):b(e,n,a,i)}}(t,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new o(this)}function m(e){if(i=i||n(5),!(d.call(m,this)||this instanceof i))return new m(e);this._writableState=new g(e,this),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.final&&(this._final=e.final)),c.call(this)}function y(e,t,n,r,o,i,s){t.writelen=r,t.writecb=s,t.writing=!0,t.sync=!0,n?e._writev(o,t.onwrite):e._write(o,i,t.onwrite),t.sync=!1}function b(e,t,n,r){n||function(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}(e,t),t.pendingcb--,r(),S(e,t)}function v(e,t){t.bufferProcessing=!0;var n=t.bufferedRequest;if(e._writev&&n&&n.next){var r=t.bufferedRequestCount,i=new Array(r),s=t.corkedRequestsFree;s.entry=n;for(var a=0,u=!0;n;)i[a]=n,n.isBuf||(u=!1),n=n.next,a+=1;i.allBuffers=u,y(e,t,!0,t.length,i,"",s.finish),t.pendingcb++,t.lastBufferedRequest=null,s.next?(t.corkedRequestsFree=s.next,s.next=null):t.corkedRequestsFree=new o(t),t.bufferedRequestCount=0}else{for(;n;){var c=n.chunk,l=n.encoding,f=n.callback;if(y(e,t,!1,t.objectMode?1:c.length,c,l,f),n=n.next,t.bufferedRequestCount--,t.writing)break}null===n&&(t.lastBufferedRequest=null)}t.bufferedRequest=n,t.bufferProcessing=!1}function w(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function C(e,t){e._final(function(n){t.pendingcb--,n&&e.emit("error",n),t.prefinished=!0,e.emit("prefinish"),S(e,t)})}function S(e,t){var n=w(t);return n&&(!function(e,t){t.prefinished||t.finalCalled||("function"==typeof e._final?(t.pendingcb++,t.finalCalled=!0,r.nextTick(C,e,t)):(t.prefinished=!0,e.emit("prefinish")))}(e,t),0===t.pendingcb&&(t.finished=!0,e.emit("finish"))),n}a.inherits(m,c),g.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(g.prototype,"buffer",{get:u.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(d=Function.prototype[Symbol.hasInstance],Object.defineProperty(m,Symbol.hasInstance,{value:function(e){return!!d.call(this,e)||this===m&&(e&&e._writableState instanceof g)}})):d=function(e){return e instanceof this},m.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},m.prototype.write=function(e,t,n){var o=this._writableState,i=!1,s=!o.objectMode&&function(e){return l.isBuffer(e)||e instanceof f}(e);return s&&!l.isBuffer(e)&&(e=function(e){return l.from(e)}(e)),"function"==typeof t&&(n=t,t=null),s?t="buffer":t||(t=o.defaultEncoding),"function"!=typeof n&&(n=h),o.ended?function(e,t){var n=new Error("write after end");e.emit("error",n),r.nextTick(t,n)}(this,n):(s||function(e,t,n,o){var i=!0,s=!1;return null===n?s=new TypeError("May not write null values to stream"):"string"==typeof n||void 0===n||t.objectMode||(s=new TypeError("Invalid non-string/buffer chunk")),s&&(e.emit("error",s),r.nextTick(o,s),i=!1),i}(this,o,e,n))&&(o.pendingcb++,i=function(e,t,n,r,o,i){if(!n){var s=function(e,t,n){e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=l.from(t,n));return t}(t,r,o);r!==s&&(n=!0,o="buffer",r=s)}var a=t.objectMode?1:r.length;t.length+=a;var u=t.length<t.highWaterMark;u||(t.needDrain=!0);if(t.writing||t.corked){var c=t.lastBufferedRequest;t.lastBufferedRequest={chunk:r,encoding:o,isBuf:n,callback:i,next:null},c?c.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else y(e,t,!1,a,r,o,i);return u}(this,o,s,e,t,n)),i},m.prototype.cork=function(){this._writableState.corked++},m.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.finished||e.bufferProcessing||!e.bufferedRequest||v(this,e))},m.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(m.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),m.prototype._write=function(e,t,n){n(new Error("_write() is not implemented"))},m.prototype._writev=null,m.prototype.end=function(e,t,n){var o=this._writableState;"function"==typeof e?(n=e,e=null,t=null):"function"==typeof t&&(n=t,t=null),null!==e&&void 0!==e&&this.write(e,t),o.corked&&(o.corked=1,this.uncork()),o.ending||o.finished||function(e,t,n){t.ending=!0,S(e,t),n&&(t.finished?r.nextTick(n):e.once("finish",n));t.ended=!0,e.writable=!1}(this,o,n)},Object.defineProperty(m.prototype,"destroyed",{get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),m.prototype.destroy=p.destroy,m.prototype._undestroy=p.undestroy,m.prototype._destroy=function(e,t){this.end(),t(e)}},function(e,t,n){"use strict";var r=n(12).Buffer,o=r.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function i(e){var t;switch(this.encoding=function(e){var t=function(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}(e);if("string"!=typeof t&&(r.isEncoding===o||!o(e)))throw new Error("Unknown encoding: "+e);return t||e}(e),this.encoding){case"utf16le":this.text=u,this.end=c,t=4;break;case"utf8":this.fillLast=a,t=4;break;case"base64":this.text=l,this.end=f,t=3;break;default:return this.write=d,void(this.end=p)}this.lastNeed=0,this.lastTotal=0,this.lastChar=r.allocUnsafe(t)}function s(e){return e<=127?0:e>>5==6?2:e>>4==14?3:e>>3==30?4:e>>6==2?-1:-2}function a(e){var t=this.lastTotal-this.lastNeed,n=function(e,t,n){if(128!=(192&t[0]))return e.lastNeed=0,"�";if(e.lastNeed>1&&t.length>1){if(128!=(192&t[1]))return e.lastNeed=1,"�";if(e.lastNeed>2&&t.length>2&&128!=(192&t[2]))return e.lastNeed=2,"�"}}(this,e);return void 0!==n?n:this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,t,0,e.length),void(this.lastNeed-=e.length))}function u(e,t){if((e.length-t)%2==0){var n=e.toString("utf16le",t);if(n){var r=n.charCodeAt(n.length-1);if(r>=55296&&r<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],n.slice(0,-1)}return n}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function c(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var n=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,n)}return t}function l(e,t){var n=(e.length-t)%3;return 0===n?e.toString("base64",t):(this.lastNeed=3-n,this.lastTotal=3,1===n?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-n))}function f(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function d(e){return e.toString(this.encoding)}function p(e){return e&&e.length?this.write(e):""}t.StringDecoder=i,i.prototype.write=function(e){if(0===e.length)return"";var t,n;if(this.lastNeed){if(void 0===(t=this.fillLast(e)))return"";n=this.lastNeed,this.lastNeed=0}else n=0;return n<e.length?t?t+this.text(e,n):this.text(e,n):t||""},i.prototype.end=function(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"�":t},i.prototype.text=function(e,t){var n=function(e,t,n){var r=t.length-1;if(r<n)return 0;var o=s(t[r]);if(o>=0)return o>0&&(e.lastNeed=o-1),o;if(--r<n||-2===o)return 0;if((o=s(t[r]))>=0)return o>0&&(e.lastNeed=o-2),o;if(--r<n||-2===o)return 0;if((o=s(t[r]))>=0)return o>0&&(2===o?o=0:e.lastNeed=o-3),o;return 0}(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=n;var r=e.length-(n-this.lastNeed);return e.copy(this.lastChar,0,r),e.toString("utf8",t,r)},i.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length}},function(e,t,n){"use strict";e.exports=i;var r=n(5),o=n(7);function i(e){if(!(this instanceof i))return new i(e);r.call(this,e),this._transformState={afterTransform:function(e,t){var n=this._transformState;n.transforming=!1;var r=n.writecb;if(!r)return this.emit("error",new Error("write callback called multiple times"));n.writechunk=null,n.writecb=null,null!=t&&this.push(t),r(e);var o=this._readableState;o.reading=!1,(o.needReadable||o.length<o.highWaterMark)&&this._read(o.highWaterMark)}.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",s)}function s(){var e=this;"function"==typeof this._flush?this._flush(function(t,n){a(e,t,n)}):a(this,null,null)}function a(e,t,n){if(t)return e.emit("error",t);if(null!=n&&e.push(n),e._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(e._transformState.transforming)throw new Error("Calling transform done when still transforming");return e.push(null)}o.inherits=n(8),o.inherits(i,r),i.prototype.push=function(e,t){return this._transformState.needTransform=!1,r.prototype.push.call(this,e,t)},i.prototype._transform=function(e,t,n){throw new Error("_transform() is not implemented")},i.prototype._write=function(e,t,n){var r=this._transformState;if(r.writecb=n,r.writechunk=e,r.writeencoding=t,!r.transforming){var o=this._readableState;(r.needTransform||o.needReadable||o.length<o.highWaterMark)&&this._read(o.highWaterMark)}},i.prototype._read=function(e){var t=this._transformState;null!==t.writechunk&&t.writecb&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0},i.prototype._destroy=function(e,t){var n=this;r.prototype._destroy.call(this,e,function(e){t(e),n.emit("close")})}},function(e,t,n){const r=n(3),o=n(4),i=n(21),s=n(2)("log4js:categories"),a=new Map;r.addListener(e=>{r.throwExceptionIf(e,r.not(r.anObject(e.categories)),'must have a property "categories" of type object.');const t=Object.keys(e.categories);r.throwExceptionIf(e,r.not(t.length),"must define at least one category."),t.forEach(t=>{const n=e.categories[t];r.throwExceptionIf(e,[r.not(n.appenders),r.not(n.level)],`category "${t}" is not valid (must be an object with properties "appenders" and "level")`),r.throwExceptionIf(e,r.not(Array.isArray(n.appenders)),`category "${t}" is not valid (appenders must be an array of appender names)`),r.throwExceptionIf(e,r.not(n.appenders.length),`category "${t}" is not valid (appenders must contain at least one appender name)`),n.appenders.forEach(n=>{r.throwExceptionIf(e,r.not(i.get(n)),`category "${t}" is not valid (appender "${n}" is not defined)`)}),r.throwExceptionIf(e,r.not(o.getLevel(n.level)),`category "${t}" is not valid (level "${n.level}" not recognised;`+` valid levels are ${o.levels.join(", ")})`)}),r.throwExceptionIf(e,r.not(e.categories.default),'must define a "default" category.')});const u=e=>{a.clear(),Object.keys(e.categories).forEach(t=>{const n=e.categories[t],r=[];n.appenders.forEach(e=>{r.push(i.get(e)),s(`Creating category ${t}`),a.set(t,{appenders:r,level:o.getLevel(n.level)})})})};u({categories:{default:{appenders:["out"],level:"OFF"}}}),r.addListener(u);const c=e=>(s(`configForCategory: searching for config for ${e}`),a.has(e)?(s(`configForCategory: ${e} exists in config, returning it`),a.get(e)):e.indexOf(".")>0?(s(`configForCategory: ${e} has hierarchy, searching for parents`),c(e.substring(0,e.lastIndexOf(".")))):(s("configForCategory: returning config for default category"),c("default")));e.exports={appendersForCategory:e=>c(e).appenders,getLevelForCategory:e=>c(e).level,setLevelForCategory:(e,t)=>{let n=a.get(e);if(s(`setLevelForCategory: found ${n} for ${e}`),!n){const t=c(e);s("setLevelForCategory: no config found for category, "+`found ${t} for parents of ${e}`),n={appenders:t.appenders}}n.level=t,a.set(e,n)}}},function(e,t,n){const r=n(15),o=n(1),i=n(9),s=(n(10).screen,n(10).remote.app),a=n(35).getLogger("ymscreenrecord");let u=null,c=null,l=0,f=null,d=!1,p="libx264",h=2,g=!1;function m(e=null){!function(e){!function(e){const t=i.platform();if("darwin"==t){let t=o.join(__dirname,"ymscreenrecord");a.info(`${t}`),r.execFile(t,["-list_devices","1","-f","cgwindow","-i","dummy"],function(t,n,r){e(t)})}else if("win32"==t){let t=o.join(__dirname,"ymscreenrecord.exe");a.info(`FFMPEG PATH: ${t}`),r.execFile(t,["-list_devices","true","-f","dshow","-i","dummy"],function(t,n,r){e(t)})}}(function(t){const n=/\[([0-9]+)\]\s(.+)/g,r=/()"([\u4e00-\u9fa5A-Za-z0-9\- \(\)]+)"/g;let o=null;const s=[],u=i.platform();"darwin"==u?o=n:"win32"==u&&(o=r);let c=o.exec(t.toString());for(;null!=c;)s.push(c[2]),"darwin"==u&&c[2]&&"youmerecord"==c[2]&&(l=c[1],a.info("selected audio device:["+l+"] "+c[2])),c=o.exec(t.toString());e(s)})}(function(t){t.forEach(function(e){/.*screen.*/.test(e)&&(c=e),/.*Microphone.*/.test(e)&&(u=e),null==u&&/.*麦克风.*/.test(e)&&(u=e),null==u&&/.*Audio.*/.test(e)&&(u=e)}),e&&e()})}function y(){d=!0,null===f||f.killed||f.kill(),f=null,a.warn("Killed")}e.exports={start:function e(t,b=null,v=!1){d=!1,null!==f&&(a.info("already running push stream, stop old stream now"),y()),m(function(){!function e(t,u,c,h=null,m=null){let y=null;const b=i.platform(),v=n(10).remote.getCurrentWindow(),w=v.getSize();v.getPosition();const C=v.getTitle();if("darwin"==b){const e=function(){const e=s.getAppPath(),t=e.substr(0,e.indexOf(".app/")),n=t.substr(t.lastIndexOf("/")+1);return n?n.replace(/ %d+$/,""):"Electron"}();let t=o.join(__dirname,"ymscreenrecord");if(a.info(`${e}`),void 0===(y=r.execFile(`${t}`,["-f","cgwindow","-framerate","15","-video_size",w[0]+"x"+w[1],"-i",`title=[${e}] ${C}:${l}`,"-c:v","h264_videotoolbox","-pix_fmt","yuv420p","-preset","veryfast","-b:v","1536k","-keyint_min","60","-g","30","-sc_threshold","0","-c:a","aac","-ar","44100","-ac","1","-b:a","64k","-f","flv",c])))return void m(1);y.stdout.on("data",function(e){a.info(`${e}\n`)}),y.stderr.on("data",function(e){let t=`ERROR: ${e}`;a.info(`${t}\n`)}),y.on("close",function(e){let t=`ffmpeg exited with code '${e}'`;a.warn(`${t}\n`),null===f||f.killed||f.kill(),f=null,m&&m(d?0:1)}),h&&h(y)}else if("win32"==b){let s=o.join(__dirname,"ymscreenrecord.exe");!function(e=null){"win32"===i.platform()&&r.exec('Wmic Path Win32_VideoController where Availability="3" get Caption',function(t,n,r){e&&e(t,n,r)})}(function(o,i,l){o||(/NVIDIA/gi.test(i)&&(a.info("当前显卡为N卡"),p="h264_nvenc"),/Intel/gi.test(i)&&(a.info("当前显卡为A卡"),p="h264_qsv")),a.info("getGraphicCardInfo: ",i),a.info("current libs",p),n(10).screen.getPrimaryDisplay().scaleFactor,r.spawn("REG",["ADD","HKCU\\Software\\Microsoft\\Windows NT\\CurrentVersion\\AppCompatFlags\\Layers","/V",`${s}`,"/T","REG_SZ","/D","~HIGHDPIAWARE","/F"]),setTimeout(function(){void 0!==(y=r.execFile(`${s}`,["-f","dshow","-i",`audio="${u}"`,"-f","loopback","-i",'audio="default"',"-filter_complex","amix=inputs=2:duration=first:dropout_transition=2","-f","gdigrab","-framerate","15","-i",`"title=${C}"`,"-vf","scale=1280:-1","-c:v",`"${p}"`,"-pix_fmt","yuv420p","-preset:v","fast","-async","1","-acodec","aac","-g","25","-bf","0","-b:v","2000k","-ar","44100","-ac","1","-f","flv",c],{windowsVerbatimArguments:!0}))?(y.stdout.on("data",function(e){a.info(`${e}\n`)}),y.stderr.on("data",function(e){let t=`ERROR: ${e}`;a.info(`${t}\n`)}),y.on("close",function(n){let r=`ffmpeg exited with code '${n}'`;a.info(`${r}\n`),null===f||f.killed||f.kill(),f=null,n&&"libx264"!==p&&!g?(p="libx264",g=!0,e(t,u,c,h,m),a.warn(`try open stream again, use lib ${p}!`)):m&&m(d?0:1)}),h&&h(y)):m(1)},1e3)})}}(c,u,t,function(e){f=e},function(n){0!==n?v&&0!==h?(h-=1,f=null,setTimeout(function(){a.info(`screen record stop with error, now will retry ${h} times`),e(t,b,v)},1200)):(a.info("screen record stop with error, code is:",n),b(n)):(a.info("success stop record"),b(n))})})},stop:y,is_runing:function(){return null!==f}}},function(e,t,n){const r=n(36),o=n(1),i=o.join(__dirname,"logs");r.configure({appenders:{file:{type:"file",filename:o.join(i,"ym-screenrecord.txt"),maxLogSize:10485760,numBackups:5,compress:!0,encoding:"utf-8",mode:416,flags:"w+"},dateFile:{type:"dateFile",filename:o.join(i,"more-ym-screenrecord.txt"),pattern:"yyyy-MM-dd-hh",compress:!0},out:{type:"stdout"}},categories:{default:{appenders:["file","dateFile","out"],level:"trace"}}}),e.exports=r},function(e,t,n){"use strict";const r=n(2)("log4js:main"),o=n(6),i=n(40)({proto:!0}),s=n(3),a=n(19),u=n(4),c=n(21),l=n(33),f=n(65),d=n(13);let p=!1;function h(e){if(!p)return;r("Received log event ",e),l.appendersForCategory(e.categoryName).forEach(t=>{t(e)})}function g(e){let t=e;return"string"==typeof t&&(t=function(e){return e?(r(`Loading configuration from ${e}`),JSON.parse(o.readFileSync(e,"utf8"))):e}(e)),r(`Configuration is ${t}`),s.configure(i(t)),d.onMessage(h),p=!0,m}const m={getLogger:function(e){return p||g(process.env.LOG4JS_CONFIG||{appenders:{out:{type:"stdout"}},categories:{default:{appenders:["out"],level:"OFF"}}}),new f(e||"default")},configure:g,shutdown:function(e){r("Shutdown called. Disabling all log writing."),p=!1;const t=Array.from(c.values()),n=t.reduceRight((e,t)=>t.shutdown?e+1:e,0);let o,i=0;function s(t){o=o||t,r(`Appender shutdowns complete: ${i+=1} / ${n}`),i>=n&&(r("All shutdown functions completed."),e(o))}return r(`Found ${n} appenders with shutdown functions.`),0===n?(r("No appenders with shutdown functions found."),e()):(t.filter(e=>e.shutdown).forEach(e=>e.shutdown(s)),null)},connectLogger:n(66),levels:u,addLayout:a.addLayout};e.exports=m},function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}t.log=function(){var e;return"object"===("undefined"==typeof console?"undefined":r(console))&&console.log&&(e=console).log.apply(e,arguments)},t.formatArgs=function(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;var n="color: "+this.color;t.splice(1,0,n,"color: inherit");var r=0,o=0;t[0].replace(/%[a-zA-Z%]/g,function(e){"%%"!==e&&"%c"===e&&(o=++r)}),t.splice(o,0,n)},t.save=function(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(e){}},t.load=function(){var e;try{e=t.storage.getItem("debug")}catch(e){}!e&&"undefined"!=typeof process&&"env"in process&&(e=process.env.DEBUG);return e},t.useColors=function(){if("undefined"!=typeof window&&window.process&&("renderer"===window.process.type||window.process.__nwjs))return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage=function(){try{return localStorage}catch(e){}}(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],e.exports=n(16)(t),e.exports.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}},function(e,t){var n=1e3,r=60*n,o=60*r,i=24*o,s=7*i,a=365.25*i;function u(e,t,n,r){var o=t>=1.5*n;return Math.round(e/n)+" "+r+(o?"s":"")}e.exports=function(e,t){t=t||{};var c=typeof e;if("string"===c&&e.length>0)return function(e){if((e=String(e)).length>100)return;var t=/^((?:\d+)?\-?\d?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(!t)return;var u=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return u*a;case"weeks":case"week":case"w":return u*s;case"days":case"day":case"d":return u*i;case"hours":case"hour":case"hrs":case"hr":case"h":return u*o;case"minutes":case"minute":case"mins":case"min":case"m":return u*r;case"seconds":case"second":case"secs":case"sec":case"s":return u*n;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return u;default:return}}(e);if("number"===c&&!1===isNaN(e))return t.long?function(e){var t=Math.abs(e);if(t>=i)return u(e,t,i,"day");if(t>=o)return u(e,t,o,"hour");if(t>=r)return u(e,t,r,"minute");if(t>=n)return u(e,t,n,"second");return e+" ms"}(e):function(e){var t=Math.abs(e);if(t>=i)return Math.round(e/i)+"d";if(t>=o)return Math.round(e/o)+"h";if(t>=r)return Math.round(e/r)+"m";if(t>=n)return Math.round(e/n)+"s";return e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},function(e,t,n){"use strict";var r=n(17),o=n(0);t.init=function(e){e.inspectOpts={};for(var n=Object.keys(t.inspectOpts),r=0;r<n.length;r++)e.inspectOpts[n[r]]=t.inspectOpts[n[r]]},t.log=function(){return process.stderr.write(o.format.apply(o,arguments)+"\n")},t.formatArgs=function(n){var r=this.namespace;if(this.useColors){var o=this.color,i="[3"+(o<8?o:"8;5;"+o),s="  ".concat(i,";1m").concat(r," [0m");n[0]=s+n[0].split("\n").join("\n"+s),n.push(i+"m+"+e.exports.humanize(this.diff)+"[0m")}else n[0]=function(){if(t.inspectOpts.hideDate)return"";return(new Date).toISOString()+" "}()+r+" "+n[0]},t.save=function(e){e?process.env.DEBUG=e:delete process.env.DEBUG},t.load=function(){return process.env.DEBUG},t.useColors=function(){return"colors"in t.inspectOpts?Boolean(t.inspectOpts.colors):r.isatty(process.stderr.fd)},t.colors=[6,2,3,4,5,1];try{var i=n(18);i&&(i.stderr||i).level>=2&&(t.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch(e){}t.inspectOpts=Object.keys(process.env).filter(function(e){return/^debug_/i.test(e)}).reduce(function(e,t){var n=t.substring(6).toLowerCase().replace(/_([a-z])/g,function(e,t){return t.toUpperCase()}),r=process.env[t];return r=!!/^(yes|on|true|enabled)$/i.test(r)||!/^(no|off|false|disabled)$/i.test(r)&&("null"===r?null:Number(r)),e[n]=r,e},{}),e.exports=n(16)(t);var s=e.exports.formatters;s.o=function(e){return this.inspectOpts.colors=this.useColors,o.inspect(e,this.inspectOpts).replace(/\s*\n\s*/g," ")},s.O=function(e){return this.inspectOpts.colors=this.useColors,o.inspect(e,this.inspectOpts)}},function(e,t,n){"use strict";e.exports=function(e){const t=(e=e||{}).proto||!1;return e.circles?function(e){const t=e.proto||!1,n=new WeakMap;return t?function e(t){const r=typeof t;if("function"===r)return t;if(null===t||"object"!==r)return t;if(t instanceof Date)return new Date(t);const o=Array.isArray(t)?new Array(t.length):{};for(var i in n.set(t,o),t){var s=t[i];if("function"!=typeof s)if(null!==s)if("object"!=typeof s)o[i]=s;else{if(s instanceof Date){o[i]=new Date(s);continue}n.has(s)?o[i]=n.get(s):o[i]=e(s)}else o[i]=null;else o[i]=s}return n.delete(t),o}:function e(t){const r=typeof t;if("function"===r)return t;if(null===t||"object"!==r)return t;if(t instanceof Date)return new Date(t);const o=Array.isArray(t)?new Array(t.length):{};for(var i in n.set(t,o),t)if(!1!==Object.hasOwnProperty.call(t,i)){var s=t[i];if("function"!=typeof s)if(null!==s)if("object"!=typeof s)o[i]=s;else{if(s instanceof Date){o[i]=new Date(s);continue}n.has(s)?o[i]=n.get(s):o[i]=e(s)}else o[i]=null;else o[i]=s}return n.delete(t),o}}(e):t?function e(t){const n=typeof t;if("function"===n)return t;if(null===t||"object"!==n)return t;if(t instanceof Date)return new Date(t);const r=Array.isArray(t)?new Array(t.length):{};for(var o in t){var i=t[o];if("function"!=typeof i)if(null!==i)if("object"!=typeof i)r[o]=i;else{if(i instanceof Date){r[o]=new Date(i);continue}r[o]=e(i)}else r[o]=null;else r[o]=i}return r}:function e(t){const n=typeof t;if("function"===n)return t;if(null===t||"object"!==n)return t;if(t instanceof Date)return new Date(t);const r=Array.isArray(t)?new Array(t.length):{};for(var o in t)if(!1!==Object.hasOwnProperty.call(t,o)){var i=t[o];if("function"!=typeof i)if(null!==i)if("object"!=typeof i)r[o]=i;else{if(i instanceof Date){r[o]=new Date(i);continue}r[o]=e(i)}else r[o]=null;else r[o]=i}return r}}},function(e,t){
/*!
Copyright (C) 2013-2017 by Andrea Giammarchi - @WebReflection

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in
all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
THE SOFTWARE.

*/
var n="~",r="\\x"+("0"+n.charCodeAt(0).toString(16)).slice(-2),o="\\"+r,i=new RegExp(r,"g"),s=new RegExp(o,"g"),a=new RegExp("(?:^|([^\\\\]))"+o),u=[].indexOf||function(e){for(var t=this.length;t--&&this[t]!==e;);return t},c=String;function l(e,t,r){return t instanceof Array?function(e,t,n){for(var r=0,o=t.length;r<o;r++)t[r]=l(e,t[r],n);return t}(e,t,r):t instanceof c?t.length?r.hasOwnProperty(t)?r[t]:r[t]=function(e,t){for(var r=0,o=t.length;r<o;e=e[t[r++].replace(s,n)]);return e}(e,t.split(n)):e:t instanceof Object?function(e,t,n){for(var r in t)t.hasOwnProperty(r)&&(t[r]=l(e,t[r],n));return t}(e,t,r):t}var f={stringify:function(e,t,s,a){return f.parser.stringify(e,function(e,t,s){var a,c,l=!1,f=!!t,d=[],p=[e],h=[e],g=[s?n:"[Circular]"],m=e,y=1;return f&&(c="object"==typeof t?function(e,n){return""!==e&&t.indexOf(e)<0?void 0:n}:t),function(e,t){return f&&(t=c.call(this,e,t)),l?(m!==this&&(a=y-u.call(p,this)-1,y-=a,p.splice(y,p.length),d.splice(y-1,d.length),m=this),"object"==typeof t&&t?(u.call(p,t)<0&&p.push(m=t),y=p.length,(a=u.call(h,t))<0?(a=h.push(t)-1,s?(d.push((""+e).replace(i,r)),g[a]=n+d.join(n)):g[a]=g[0]):t=g[a]):"string"==typeof t&&s&&(t=t.replace(r,o).replace(n,r))):l=!0,t}}(e,t,!a),s)},parse:function(e,t){return f.parser.parse(e,function(e){return function(t,i){var s="string"==typeof i;return s&&i.charAt(0)===n?new c(i.slice(1)):(""===t&&(i=l(i,i,{})),s&&(i=i.replace(a,"$1"+n).replace(o,r)),e?e.call(this,t,i):i)}}(t))},parser:JSON};e.exports=f},function(e,t){e.exports=require("cluster")},function(e,t,n){"use strict";function r(e){if("number"==typeof e&&Number.isInteger(e))return e;const t={K:1024,M:1048576,G:1073741824},n=Object.keys(t),r=e.substr(e.length-1).toLocaleUpperCase(),o=e.substring(0,e.length-1).trim();if(n.indexOf(r)<0||!Number.isInteger(Number(o)))throw Error(`maxLogSize: "${e}" is invalid`);return o*t[r]}function o(e){return function(e,t){const n=Object.assign({},t);return Object.keys(e).forEach(r=>{n[r]&&(n[r]=e[r](t[r]))}),n}({maxLogSize:r},e)}const i={file:o,fileSync:o};e.exports.modifyConfig=(e=>i[e.type]?i[e.type](e):e)},function(e,t,n){"use strict";const r=console.log.bind(console);e.exports.configure=function(e,t){let n=t.colouredLayout;return e.layout&&(n=t.layout(e.layout.type,e.layout)),function(e,t){return n=>{r(e(n,t))}}(n,e.timezoneOffset)}},function(e,t,n){"use strict";t.configure=function(e,t){let n=t.colouredLayout;return e.layout&&(n=t.layout(e.layout.type,e.layout)),function(e,t){return n=>{process.stdout.write(`${e(n,t)}\n`)}}(n,e.timezoneOffset)}},function(e,t,n){"use strict";e.exports.configure=function(e,t){let n=t.colouredLayout;return e.layout&&(n=t.layout(e.layout.type,e.layout)),function(e,t){return n=>{process.stderr.write(`${e(n,t)}\n`)}}(n,e.timezoneOffset)}},function(e,t,n){"use strict";const r=n(2)("log4js:file"),o=n(1),i=n(23),s=n(9).EOL||"\n";function a(e,t,n,a,u,c){e=o.normalize(e),r("Creating file appender (",e,", ",n,", ",a=0===(a=void 0===a?5:a)?1:a,", ",u,", ",c,")");const l=function(e,t,n,r){const o=new i.RollingFileStream(e,t,n,r);return o.on("error",t=>{console.error("log4js.fileAppender - Writing to file %s, error happened ",e,t)}),o}(e,n,a,u),f=function(e){l.write(t(e,c)+s,"utf8")};return f.reopen=function(){l.closeTheStream(l.openTheStream.bind(l))},f.sighupHandler=function(){r("SIGHUP handler called."),f.reopen()},f.shutdown=function(e){process.removeListener("SIGHUP",f.sighupHandler),l.write("","utf-8",()=>{l.end(e)})},process.on("SIGHUP",f.sighupHandler),f}e.exports.configure=function(e,t){let n=t.basicLayout;return e.layout&&(n=t.layout(e.layout.type,e.layout)),a(e.filename,n,e.maxLogSize,e.backups,e,e.timezoneOffset)}},function(e,t,n){"use strict";var r=n(24),o=n(14)("streamroller:RollingFileStream"),i=n(0),s=n(1),a=(n(15),n(6));function u(e,t,n,r){this.size=t||Number.MAX_SAFE_INTEGER,this.backups=n||1,function(){if(!e||t<=0)throw new Error("You must specify a filename and file size")}(),u.super_.call(this,e,r)}e.exports=u,i.inherits(u,r),u.prototype.shouldRoll=function(){return o("should roll with current size ",this.currentSize," and max size ",this.size),this.currentSize>=this.size},u.prototype.roll=function(e,t){var n=this,r=s.parse(e),i=r.dir,u=r.name,c=""===r.ext?"":r.ext.substring(1),l=new RegExp("^"+u);function f(e){return l.test(e)}function d(e){o("Calculating index of "+e);var t=function(e){return e.substring((u+".").length).split(".")}(e);return"gz"===t[t.length-1]&&t.pop(),n.options.keepFileExt?parseInt(t[0],10)||0:parseInt(t[t.length-1])||0}function p(e,t){return d(e)>d(t)?1:d(e)<d(t)?-1:0}o("Rolling, rolling, rolling"),this.closeTheStream(function(t){o("Renaming the old files"),a.readdir(s.dirname(e),function(e,r){if(e)return t(e);var l=r.filter(f).sort(p);!function e(r){var f=l.pop();if(!f||r)return t(r);!function(e,t){var r=d(e);if(o("Index of "+e+" is "+r),r<n.backups){var l=(r+1).toString(),f=[u];c?n.options.keepFileExt?f.push(l,c):f.push(c,l):f.push(l);var p=s.join(i,f.join("."));n.options.compress&&".gz"===s.extname(e)&&(p+=".gz"),a.unlink(p,function(r){o("Renaming "+e+" -> "+p),a.rename(s.join(i,e),p,function(r){r?t(r):n.options.compress&&".gz"!==s.extname(e)?n.compress(p,t):t()})})}else t()}(f,e)}()})}.bind(null,this.openTheStream.bind(this,t)))}},function(e,t){e.exports=require("zlib")},function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}t.log=function(){var e;return"object"===("undefined"==typeof console?"undefined":r(console))&&console.log&&(e=console).log.apply(e,arguments)},t.formatArgs=function(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;var n="color: "+this.color;t.splice(1,0,n,"color: inherit");var r=0,o=0;t[0].replace(/%[a-zA-Z%]/g,function(e){"%%"!==e&&"%c"===e&&(o=++r)}),t.splice(o,0,n)},t.save=function(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(e){}},t.load=function(){var e;try{e=t.storage.getItem("debug")}catch(e){}!e&&"undefined"!=typeof process&&"env"in process&&(e=process.env.DEBUG);return e},t.useColors=function(){if("undefined"!=typeof window&&window.process&&("renderer"===window.process.type||window.process.__nwjs))return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage=function(){try{return localStorage}catch(e){}}(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],e.exports=n(25)(t),e.exports.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}},function(e,t){var n=1e3,r=60*n,o=60*r,i=24*o,s=7*i,a=365.25*i;function u(e,t,n,r){var o=t>=1.5*n;return Math.round(e/n)+" "+r+(o?"s":"")}e.exports=function(e,t){t=t||{};var c=typeof e;if("string"===c&&e.length>0)return function(e){if((e=String(e)).length>100)return;var t=/^((?:\d+)?\-?\d?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(!t)return;var u=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return u*a;case"weeks":case"week":case"w":return u*s;case"days":case"day":case"d":return u*i;case"hours":case"hour":case"hrs":case"hr":case"h":return u*o;case"minutes":case"minute":case"mins":case"min":case"m":return u*r;case"seconds":case"second":case"secs":case"sec":case"s":return u*n;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return u;default:return}}(e);if("number"===c&&!1===isNaN(e))return t.long?function(e){var t=Math.abs(e);if(t>=i)return u(e,t,i,"day");if(t>=o)return u(e,t,o,"hour");if(t>=r)return u(e,t,r,"minute");if(t>=n)return u(e,t,n,"second");return e+" ms"}(e):function(e){var t=Math.abs(e);if(t>=i)return Math.round(e/i)+"d";if(t>=o)return Math.round(e/o)+"h";if(t>=r)return Math.round(e/r)+"m";if(t>=n)return Math.round(e/n)+"s";return e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},function(e,t,n){"use strict";var r=n(17),o=n(0);t.init=function(e){e.inspectOpts={};for(var n=Object.keys(t.inspectOpts),r=0;r<n.length;r++)e.inspectOpts[n[r]]=t.inspectOpts[n[r]]},t.log=function(){return process.stderr.write(o.format.apply(o,arguments)+"\n")},t.formatArgs=function(n){var r=this.namespace;if(this.useColors){var o=this.color,i="[3"+(o<8?o:"8;5;"+o),s="  ".concat(i,";1m").concat(r," [0m");n[0]=s+n[0].split("\n").join("\n"+s),n.push(i+"m+"+e.exports.humanize(this.diff)+"[0m")}else n[0]=function(){if(t.inspectOpts.hideDate)return"";return(new Date).toISOString()+" "}()+r+" "+n[0]},t.save=function(e){e?process.env.DEBUG=e:delete process.env.DEBUG},t.load=function(){return process.env.DEBUG},t.useColors=function(){return"colors"in t.inspectOpts?Boolean(t.inspectOpts.colors):r.isatty(process.stderr.fd)},t.colors=[6,2,3,4,5,1];try{var i=n(18);i&&(i.stderr||i).level>=2&&(t.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch(e){}t.inspectOpts=Object.keys(process.env).filter(function(e){return/^debug_/i.test(e)}).reduce(function(e,t){var n=t.substring(6).toLowerCase().replace(/_([a-z])/g,function(e,t){return t.toUpperCase()}),r=process.env[t];return r=!!/^(yes|on|true|enabled)$/i.test(r)||!/^(no|off|false|disabled)$/i.test(r)&&("null"===r?null:Number(r)),e[n]=r,e},{}),e.exports=n(25)(t);var s=e.exports.formatters;s.o=function(e){return this.inspectOpts.colors=this.useColors,o.inspect(e,this.inspectOpts).replace(/\s*\n\s*/g," ")},s.O=function(e){return this.inspectOpts.colors=this.useColors,o.inspect(e,this.inspectOpts)}},function(e,t,n){var r=n(1),o=n(6),i=parseInt("0777",8);function s(e,t,n,a){"function"==typeof t?(n=t,t={}):t&&"object"==typeof t||(t={mode:t});var u=t.mode,c=t.fs||o;void 0===u&&(u=i&~process.umask()),a||(a=null);var l=n||function(){};e=r.resolve(e),c.mkdir(e,u,function(n){if(!n)return l(null,a=a||e);switch(n.code){case"ENOENT":s(r.dirname(e),t,function(n,r){n?l(n,r):s(e,t,l,r)});break;default:c.stat(e,function(e,t){e||!t.isDirectory()?l(n,a):l(null,a)})}})}e.exports=s.mkdirp=s.mkdirP=s,s.sync=function e(t,n,s){n&&"object"==typeof n||(n={mode:n});var a=n.mode,u=n.fs||o;void 0===a&&(a=i&~process.umask()),s||(s=null),t=r.resolve(t);try{u.mkdirSync(t,a),s=s||t}catch(o){switch(o.code){case"ENOENT":e(t,n,s=e(r.dirname(t),n,s));break;default:var c;try{c=u.statSync(t)}catch(e){throw o}if(!c.isDirectory())throw o}}return s}},function(e,t,n){var r=n(26);"disable"===process.env.READABLE_STREAM&&r?(e.exports=r,(t=e.exports=r.Readable).Readable=r.Readable,t.Writable=r.Writable,t.Duplex=r.Duplex,t.Transform=r.Transform,t.PassThrough=r.PassThrough,t.Stream=r):((t=e.exports=n(27)).Stream=r||t,t.Readable=t,t.Writable=n(30),t.Duplex=n(5),t.Transform=n(32),t.PassThrough=n(61))},function(e,t){var n={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},function(e,t){e.exports=require("events")},function(e,t){e.exports=require("buffer")},function(e,t){"function"==typeof Object.create?e.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},function(e,t,n){"use strict";var r=n(12).Buffer,o=n(0);function i(e,t,n){e.copy(t,n)}e.exports=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.head=null,this.tail=null,this.length=0}return e.prototype.push=function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length},e.prototype.unshift=function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length},e.prototype.shift=function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}},e.prototype.clear=function(){this.head=this.tail=null,this.length=0},e.prototype.join=function(e){if(0===this.length)return"";for(var t=this.head,n=""+t.data;t=t.next;)n+=e+t.data;return n},e.prototype.concat=function(e){if(0===this.length)return r.alloc(0);if(1===this.length)return this.head.data;for(var t=r.allocUnsafe(e>>>0),n=this.head,o=0;n;)i(n.data,t,o),o+=n.data.length,n=n.next;return t},e}(),o&&o.inspect&&o.inspect.custom&&(e.exports.prototype[o.inspect.custom]=function(){var e=o.inspect({length:this.length});return this.constructor.name+" "+e})},function(e,t,n){e.exports=n(0).deprecate},function(e,t,n){"use strict";e.exports=i;var r=n(32),o=n(7);function i(e){if(!(this instanceof i))return new i(e);r.call(this,e)}o.inherits=n(8),o.inherits(i,r),i.prototype._transform=function(e,t,n){n(null,e)}},function(e,t,n){"use strict";var r=n(24),o=n(14)("streamroller:DateRollingFileStream"),i=n(20),s=n(6),a=n(1),u=n(0);function c(e,t,n,r){o("Now is ",r),t&&"object"==typeof t&&(r=n,n=t,t=null),this.pattern=t||".yyyy-MM-dd",this.now=r||Date.now,this.lastTimeWeWroteSomething=i.asString(this.pattern,function(e,t){return s.existsSync(e)?s.statSync(e).mtime:new Date(t())}(e,this.now)),this.baseFilename=e,this.alwaysIncludePattern=!1,o("options is ",n),n&&n.alwaysIncludePattern&&(o("always include pattern is true"),this.alwaysIncludePattern=!0,e=this.baseFilename+this.lastTimeWeWroteSomething,o("filename is now ",e)),o("this.now is ",this.now,", now is ",r),c.super_.call(this,e,n)}e.exports=c,u.inherits(c,r),c.prototype.shouldRoll=function(){var e=this.lastTimeWeWroteSomething,t=i.asString(this.pattern,new Date(this.now()));return o("DateRollingFileStream.shouldRoll with now = ",this.now(),", thisTime = ",t,", lastTime = ",e),this.lastTimeWeWroteSomething=t,this.previousTime=e,t!==e},c.prototype.roll=function(e,t){o("Starting roll");var n=a.parse(this.baseFilename);if(this.alwaysIncludePattern)this.filename=this.options.keepFileExt?a.join(n.dir,n.name+this.lastTimeWeWroteSomething+n.ext):this.baseFilename+this.lastTimeWeWroteSomething,this.closeTheStream(this.compressIfNeeded.bind(this,e,this.removeOldFilesIfNeeded.bind(this,this.openTheStream.bind(this,t))));else{var r=this.options.keepFileExt?a.join(n.dir,n.name+this.previousTime+n.ext):this.baseFilename+this.previousTime;this.closeTheStream(function(e){s.unlink(r,function(t){e()})}.bind(null,function(t){o("Renaming the ",e," -> ",r),s.rename(e,r,t)}.bind(null,this.compressIfNeeded.bind(this,r,this.removeOldFilesIfNeeded.bind(this,this.openTheStream.bind(this,t))))))}},c.prototype.compressIfNeeded=function(e,t){o("Checking if we need to compress the old file"),this.options.compress?this.compress(e,t):t()},c.prototype.removeOldFilesIfNeeded=function(e){if(o("Checking if we need to delete old files"),this.options.daysToKeep&&this.options.daysToKeep>0){var t=new Date(this.now()-864e5*this.options.daysToKeep);o("Will delete any log files modified before ",t.toString()),this.removeFilesOlderThan(t)}e()},c.prototype.removeFilesOlderThan=function(e){for(var t=a.dirname(this.baseFilename),n=a.basename(this.baseFilename),r=s.readdirSync(t).filter(function(e){return e.indexOf(n)>-1}),i=0;i<r.length;i++){var u=a.join(t,r[i]);s.statSync(u).mtime<e&&(o("Deleting old log ",r),s.unlinkSync(u))}}},function(e,t,n){"use strict";const r=n(23),o=n(9).EOL||"\n";e.exports.configure=function(e,t){let n=t.basicLayout;return e.layout&&(n=t.layout(e.layout.type,e.layout)),e.alwaysIncludePattern||(e.alwaysIncludePattern=!1),function(e,t,n,i,s){const a=new r.DateRollingFileStream(e,t,i),u=function(e){a.write(n(e,s)+o,"utf8")};return u.shutdown=function(e){a.write("","utf-8",()=>{a.end(e)})},u}(e.filename,e.pattern,n,e,e.timezoneOffset)}},function(e,t){function n(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id=64},function(e,t,n){"use strict";const r=n(2)("log4js:logger"),o=n(22),i=n(4),s=n(13),a=n(33),u=n(3);class c{constructor(e){if(!e)throw new Error("No category provided.");this.category=e,this.context={},r(`Logger created (${this.category}, ${this.level})`)}get level(){return i.getLevel(a.getLevelForCategory(this.category),i.TRACE)}set level(e){a.setLevelForCategory(this.category,i.getLevel(e,this.level))}log(e,...t){const n=i.getLevel(e,i.INFO);this.isLevelEnabled(n)&&this._log(n,t)}isLevelEnabled(e){return this.level.isLessThanOrEqualTo(e)}_log(e,t){r(`sending log data (${e}) to appenders`);const n=new o(this.category,e,t,this.context);s.send(n)}addContext(e,t){this.context[e]=t}removeContext(e){delete this.context[e]}clearContext(){this.context={}}}function l(e){const t=i.getLevel(e),n=t.toString().toLowerCase().replace(/_([a-z])/g,e=>e[1].toUpperCase()),r=n[0].toUpperCase()+n.slice(1);c.prototype[`is${r}Enabled`]=function(){return this.isLevelEnabled(t)},c.prototype[n]=function(...e){this.log(t,...e)}}i.levels.forEach(l),u.addListener(()=>{i.levels.forEach(l)}),e.exports=c},function(e,t,n){"use strict";const r=n(4);function o(e,t){for(let n=0;n<t.length;n++)e=e.replace(t[n].token,t[n].replacement);return e}e.exports=function(e,t){t="object"==typeof t?t||{}:t?{format:t}:{};const n=e;let i=r.getLevel(t.level,r.INFO);const s=t.format||':remote-addr - - ":method :url HTTP/:http-version" :status :content-length ":referrer" ":user-agent"',a=t.nolog?function(e){let t=null;if(e&&(e instanceof RegExp&&(t=e),"string"==typeof e&&(t=new RegExp(e)),Array.isArray(e))){const n=e.map(e=>e.source?e.source:e);t=new RegExp(n.join("|"))}return t}(t.nolog):null;return(e,u,c)=>{if(e._logging)return c();if(a&&a.test(e.originalUrl))return c();if(n.isLevelEnabled(i)||"auto"===t.level){const a=new Date,c=u.writeHead;e._logging=!0,u.writeHead=((e,n)=>{u.writeHead=c,u.writeHead(e,n),u.__statusCode=e,u.__headers=n||{},"auto"===t.level?(i=r.INFO,e>=300&&(i=r.WARN),e>=400&&(i=r.ERROR)):i=r.getLevel(t.level,r.INFO)}),u.on("finish",()=>{if(u.responseTime=new Date-a,u.statusCode&&"auto"===t.level&&(i=r.INFO,u.statusCode>=300&&(i=r.WARN),u.statusCode>=400&&(i=r.ERROR)),n.isLevelEnabled(i)){const r=function(e,t,n){const r=[];return r.push({token:":url",replacement:function(e){return e.originalUrl||e.url}(e)}),r.push({token:":protocol",replacement:e.protocol}),r.push({token:":hostname",replacement:e.hostname}),r.push({token:":method",replacement:e.method}),r.push({token:":status",replacement:t.__statusCode||t.statusCode}),r.push({token:":response-time",replacement:t.responseTime}),r.push({token:":date",replacement:(new Date).toUTCString()}),r.push({token:":referrer",replacement:e.headers.referer||e.headers.referrer||""}),r.push({token:":http-version",replacement:`${e.httpVersionMajor}.${e.httpVersionMinor}`}),r.push({token:":remote-addr",replacement:e.headers["x-forwarded-for"]||e.ip||e._remoteAddress||e.socket&&(e.socket.remoteAddress||e.socket.socket&&e.socket.socket.remoteAddress)}),r.push({token:":user-agent",replacement:e.headers["user-agent"]}),r.push({token:":content-length",replacement:t._headers&&t._headers["content-length"]||t.__headers&&t.__headers["Content-Length"]||"-"}),r.push({token:/:req\[([^\]]+)]/g,replacement:function(t,n){return e.headers[n.toLowerCase()]}}),r.push({token:/:res\[([^\]]+)]/g,replacement:function(e,n){return t._headers?t._headers[n.toLowerCase()]||t.__headers[n]:t.__headers&&t.__headers[n]}}),(e=>{const t=e.concat();for(let e=0;e<t.length;++e)for(let n=e+1;n<t.length;++n)t[e].token==t[n].token&&t.splice(n--,1);return t})(n.concat(r))}(e,u,t.tokens||[]);if("function"==typeof s){const t=s(e,u,e=>o(e,r));t&&n.log(i,t)}else n.log(i,o(s,r))}})}return c()}}}]);