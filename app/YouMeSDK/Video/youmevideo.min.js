module.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=40)}([function(e,t){Math.sign=function(e){return e<0?-1:1},e.exports={precision:1e-6,approxPrecision:1e-5}},function(e,t,n){var r=n(0),i=n(4);function o(){}o.prototype={norm:function(){for(var e=this.elements.length,t=0;e--;)t+=Math.pow(this.elements[e],2);return Math.sqrt(t)},e:function(e){return e<1||e>this.elements.length?null:this.elements[e-1]},dimensions:function(){return{rows:1,cols:this.elements.length}},rows:function(){return 1},cols:function(){return this.elements.length},modulus:function(){return Math.sqrt(this.dot(this))},eql:function(e){var t=this.elements.length,n=e.elements||e;if(t!=n.length)return!1;for(;t--;)if(Math.abs(this.elements[t]-n[t])>r.precision)return!1;return!0},dup:function(){return o.create(this.elements)},map:function(e){var t=[];return this.each(function(n,r){t.push(e(n,r))}),o.create(t)},each:function(e){for(var t=this.elements.length,n=0;n<t;n++)e(this.elements[n],n+1)},toUnitVector:function(){var e=this.modulus();return 0===e?this.dup():this.map(function(t){return t/e})},angleFrom:function(e){var t=e.elements||e;if(this.elements.length!=t.length)return null;var n=0,r=0,i=0;if(this.each(function(e,o){n+=e*t[o-1],r+=e*e,i+=t[o-1]*t[o-1]}),r=Math.sqrt(r),i=Math.sqrt(i),r*i==0)return null;var o=n/(r*i);return o<-1&&(o=-1),o>1&&(o=1),Math.acos(o)},isParallelTo:function(e){var t=this.angleFrom(e);return null===t?null:t<=r.precision},isAntiparallelTo:function(e){var t=this.angleFrom(e);return null===t?null:Math.abs(t-Math.PI)<=r.precision},isPerpendicularTo:function(e){var t=this.dot(e);return null===t?null:Math.abs(t)<=r.precision},add:function(e){var t=e.elements||e;return this.elements.length!=t.length?this.map(function(t){return t+e}):this.map(function(e,n){return e+t[n-1]})},subtract:function(e){if("number"==typeof e)return this.map(function(t){return t-e});var t=e.elements||e;return this.elements.length!=t.length?null:this.map(function(e,n){return e-t[n-1]})},multiply:function(e){return this.map(function(t){return t*e})},elementMultiply:function(e){return this.map(function(t,n){return e.e(n)*t})},sum:function(){var e=0;return this.map(function(t){e+=t}),e},chomp:function(e){for(var t=[],n=e;n<this.elements.length;n++)t.push(this.elements[n]);return o.create(t)},top:function(e){for(var t=[],n=0;n<e;n++)t.push(this.elements[n]);return o.create(t)},augment:function(e){for(var t=this.elements,n=0;n<e.length;n++)t.push(e[n]);return o.create(t)},x:function(e){return this.multiply(e)},log:function(){return o.log(this)},elementDivide:function(e){return this.map(function(t,n){return t/e.e(n)})},product:function(){var e=1;return this.map(function(t){e*=t}),e},dot:function(e){var t=e.elements||e,n=0,r=this.elements.length;if(r!=t.length)return null;for(;r--;)n+=this.elements[r]*t[r];return n},cross:function(e){var t=e.elements||e;if(3!=this.elements.length||3!=t.length)return null;var n=this.elements;return o.create([n[1]*t[2]-n[2]*t[1],n[2]*t[0]-n[0]*t[2],n[0]*t[1]-n[1]*t[0]])},max:function(){for(var e=0,t=this.elements.length;t--;)Math.abs(this.elements[t])>Math.abs(e)&&(e=this.elements[t]);return e},maxIndex:function(){for(var e=0,t=this.elements.length,n=-1;t--;)Math.abs(this.elements[t])>Math.abs(e)&&(e=this.elements[t],n=t+1);return n},indexOf:function(e){for(var t=null,n=this.elements.length,r=0;r<n;r++)null===t&&this.elements[r]==e&&(t=r+1);return t},toDiagonalMatrix:function(){return i.Diagonal(this.elements)},round:function(){return this.map(function(e){return Math.round(e)})},transpose:function(){for(var e=this.elements.length,t=[],n=0;n<e;n++)t.push([this.elements[n]]);return i.create(t)},snapTo:function(e){return this.map(function(t){return Math.abs(t-e)<=r.precision?e:t})},distanceFrom:function(e){if(e.anchor||e.start&&e.end)return e.distanceFrom(this);var t=e.elements||e;if(t.length!=this.elements.length)return null;var n,r=0;return this.each(function(e,i){n=e-t[i-1],r+=n*n}),Math.sqrt(r)},liesOn:function(e){return e.contains(this)},liesIn:function(e){return e.contains(this)},rotate:function(e,t){var n,r,s,u,a=null;switch(e.determinant&&(a=e.elements),this.elements.length){case 2:return 2!=(n=t.elements||t).length?null:(a||(a=i.Rotation(e).elements),r=this.elements[0]-n[0],s=this.elements[1]-n[1],o.create([n[0]+a[0][0]*r+a[0][1]*s,n[1]+a[1][0]*r+a[1][1]*s]));case 3:if(!t.direction)return null;var l=t.pointClosestTo(this).elements;return a||(a=i.Rotation(e,t.direction).elements),r=this.elements[0]-l[0],s=this.elements[1]-l[1],u=this.elements[2]-l[2],o.create([l[0]+a[0][0]*r+a[0][1]*s+a[0][2]*u,l[1]+a[1][0]*r+a[1][1]*s+a[1][2]*u,l[2]+a[2][0]*r+a[2][1]*s+a[2][2]*u]);default:return null}},reflectionIn:function(e){if(e.anchor){var t=this.elements.slice(),n=e.pointClosestTo(t).elements;return o.create([n[0]+(n[0]-t[0]),n[1]+(n[1]-t[1]),n[2]+(n[2]-(t[2]||0))])}var r=e.elements||e;return this.elements.length!=r.length?null:this.map(function(e,t){return r[t-1]+(r[t-1]-e)})},to3D:function(){var e=this.dup();switch(e.elements.length){case 3:break;case 2:e.elements.push(0);break;default:return null}return e},inspect:function(){return"["+this.elements.join(", ")+"]"},setElements:function(e){return this.elements=(e.elements||e).slice(),this}},o.create=function(e){return(new o).setElements(e)},o.i=o.create([1,0,0]),o.j=o.create([0,1,0]),o.k=o.create([0,0,1]),o.Random=function(e){for(var t=[];e--;)t.push(Math.random());return o.create(t)},o.Fill=function(e,t){for(var n=[];e--;)n.push(t);return o.create(n)},o.Zero=function(e){return o.Fill(e,0)},o.One=function(e){return o.Fill(e,1)},o.log=function(e){return e.map(function(e){return Math.log(e)})},e.exports=o},function(e,t){e.exports=function(e){return Object.prototype.toString.call(e).slice(8,-1)}},function(e,t){e.exports=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}},function(e,t,n){var r=n(0);function o(e,t,n,r){for(var i=e.elements,o=r-1;o--;){for(var s=[],u=0;u<n;u++)s.push(u==o?1:0);i.unshift(s)}for(o=r-1;o<t;o++)for(;i[o].length<n;)i[o].unshift(0);return $M(i)}function s(){for(var e=this,t=a.I(e.rows()),n=e.transpose(),r=a.I(e.cols()),i=Number.MAX_VALUE,o=0;i>2.2737e-13&&o<100;){var s=n.transpose().qrJs();n=s.R,t=t.x(s.Q),s=n.transpose().qrJs(),r=r.x(s.Q);var u=(n=s.R).triu(1).unroll().norm(),l=n.diagonal().norm();0==l&&(l=1),i=u/l,o++}var c=n.diagonal(),h=[];for(o=1;o<=c.cols();o++){var m=c.e(o);if(h.push(Math.abs(m)),m<0)for(var f=0;f<r.rows();f++)t.elements[f][o-1]=-t.elements[f][o-1]}return{U:r,S:$V(h).toDiagonalMatrix(),V:t}}function u(){for(var e=this.rows(),t=this.cols(),n=a.I(e),r=this,i=1;i<Math.min(e,t);i++){for(var s=r.slice(i,0,i,i).col(1),u=[1];u.length<=e-i;)u.push(0);u=$V(u);var l=s.add(u.x(s.norm()*Math.sign(s.e(1)))),c=$M(l),h=o(a.I(e-i+1).subtract(c.x(2).x(c.transpose()).div(c.transpose().x(c).e(1,1))),e,t,i);r=h.x(r),n=n.x(h)}return{Q:n,R:r}}function a(){}function l(){for(var e=this.dup(),t=a.I(e.rows()),n=a.I(e.rows()),r=a.Zeros(e.rows(),e.cols()),i=1,o=1;o<=Math.min(e.cols(),e.rows());o++){n=e.partialPivot(o,i,n,e,t);for(var s=o+1;s<=e.rows();s++){var u=e.e(s,i)/e.e(o,i);t.elements[s-1][o-1]=u;for(var l=o+1;l<=e.cols();l++)e.elements[s-1][l-1]-=e.e(o,l)*u}for(l=o;l<=e.cols();l++)r.elements[o-1][l-1]=e.e(o,l);i<e.cols()&&i++}return{L:t,U:r,P:n}}n(1),a.prototype={solve:function(e){var t=this.lu();e=t.P.x(e);var n=t.L.forwardSubstitute(e),r=t.U.backSubstitute(n);return t.P.x(r)},pcaProject:function(e,t){var n=(t=t||function(e){var t=e.transpose().x(e).x(1/e.rows()).svd();return{U:t.U,S:t.S}}(this).U).slice(1,t.rows(),1,e);return{Z:this.x(n),U:t}},pcaRecover:function(e){var t=this.cols(),n=e.slice(1,e.rows(),1,t);return this.x(n.transpose())},triu:function(e){return e||(e=0),this.map(function(t,n,r){return r-n>=e?t:0})},unroll:function(){for(var e=[],t=1;t<=this.cols();t++)for(var n=1;n<=this.rows();n++)e.push(this.e(n,t));return $V(e)},slice:function(e,t,n,r){var o=[];for(0==t&&(t=this.rows()),0==r&&(r=this.cols()),i=e;i<=t;i++){var s=[];for(j=n;j<=r;j++)s.push(this.e(i,j));o.push(s)}return $M(o)},e:function(e,t){return e<1||e>this.elements.length||t<1||t>this.elements[0].length?null:this.elements[e-1][t-1]},row:function(e){return e>this.elements.length?null:$V(this.elements[e-1])},col:function(e){if(e>this.elements[0].length)return null;for(var t=[],n=this.elements.length,r=0;r<n;r++)t.push(this.elements[r][e-1]);return $V(t)},dimensions:function(){return{rows:this.elements.length,cols:this.elements[0].length}},rows:function(){return this.elements.length},cols:function(){return this.elements[0].length},approxEql:function(e){return this.eql(e,r.approxPrecision)},eql:function(e,t){var n=e.elements||e;if(void 0===n[0][0]&&(n=a.create(n).elements),this.elements.length!=n.length||this.elements[0].length!=n[0].length)return!1;for(var i,o=this.elements.length,s=this.elements[0].length;o--;)for(i=s;i--;)if(Math.abs(this.elements[o][i]-n[o][i])>(t||r.precision))return!1;return!0},dup:function(){return a.create(this.elements)},map:function(e){for(var t,n=[],r=this.elements.length,i=this.elements[0].length;r--;)for(t=i,n[r]=[];t--;)n[r][t]=e(this.elements[r][t],r+1,t+1);return a.create(n)},isSameSizeAs:function(e){var t=e.elements||e;return void 0===t[0][0]&&(t=a.create(t).elements),this.elements.length==t.length&&this.elements[0].length==t[0].length},add:function(e){if("number"==typeof e)return this.map(function(t,n,r){return t+e});var t=e.elements||e;return void 0===t[0][0]&&(t=a.create(t).elements),this.isSameSizeAs(t)?this.map(function(e,n,r){return e+t[n-1][r-1]}):null},subtract:function(e){if("number"==typeof e)return this.map(function(t,n,r){return t-e});var t=e.elements||e;return void 0===t[0][0]&&(t=a.create(t).elements),this.isSameSizeAs(t)?this.map(function(e,n,r){return e-t[n-1][r-1]}):null},canMultiplyFromLeft:function(e){var t=e.elements||e;return void 0===t[0][0]&&(t=a.create(t).elements),this.elements[0].length==t.length},mulOp:function(e,t){if(!e.elements)return this.map(function(n){return t(n,e)});var n=!!e.modulus;if(void 0===(d=e.elements||e)[0][0]&&(d=a.create(d).elements),!this.canMultiplyFromLeft(d))return null;for(var r,i,o,s,u,l=this.elements,c=[],h=l.length,m=d[0].length,f=l[0].length,p=h;p--;){for(i=[],r=l[p],s=m;s--;){for(o=0,u=f;u--;)o+=t(r[u],d[u][s]);i[s]=o}c[p]=i}var d=a.create(c);return n?d.col(1):d},div:function(e){return this.mulOp(e,function(e,t){return e/t})},multiply:function(e){return this.mulOp(e,function(e,t){return e*t})},x:function(e){return this.multiply(e)},elementMultiply:function(e){return this.map(function(t,n,r){return e.e(n,r)*t})},sum:function(){var e=0;return this.map(function(t){e+=t}),e},mean:function(){for(var e=this.dimensions(),t=[],n=1;n<=e.cols;n++)t.push(this.col(n).sum()/e.rows);return $V(t)},column:function(e){return this.col(e)},log:function(){return this.map(function(e){return Math.log(e)})},minor:function(e,t,n,r){for(var i,o,s,u=[],l=n,c=this.elements.length,h=this.elements[0].length;l--;)for(u[i=n-l-1]=[],o=r;o--;)s=r-o-1,u[i][s]=this.elements[(e+i-1)%c][(t+s-1)%h];return a.create(u)},transpose:function(){for(var e,t=this.elements.length,n=[],r=this.elements[0].length;r--;)for(e=t,n[r]=[];e--;)n[r][e]=this.elements[e][r];return a.create(n)},isSquare:function(){return this.elements.length==this.elements[0].length},max:function(){for(var e,t=0,n=this.elements.length,r=this.elements[0].length;n--;)for(e=r;e--;)Math.abs(this.elements[n][e])>Math.abs(t)&&(t=this.elements[n][e]);return t},indexOf:function(e){var t,n,r=this.elements.length,i=this.elements[0].length;for(t=0;t<r;t++)for(n=0;n<i;n++)if(this.elements[t][n]==e)return{i:t+1,j:n+1};return null},diagonal:function(){if(!this.isSquare)return null;for(var e=[],t=this.elements.length,n=0;n<t;n++)e.push(this.elements[n][n]);return $V(e)},toRightTriangular:function(){var e,t,n,r,i=this.dup(),o=this.elements.length,s=this.elements[0].length;for(t=0;t<o;t++){if(0==i.elements[t][t])for(n=t+1;n<o;n++)if(0!=i.elements[n][t]){for(e=[],r=0;r<s;r++)e.push(i.elements[t][r]+i.elements[n][r]);i.elements[t]=e;break}if(0!=i.elements[t][t])for(n=t+1;n<o;n++){var u=i.elements[n][t]/i.elements[t][t];for(e=[],r=0;r<s;r++)e.push(r<=t?0:i.elements[n][r]-i.elements[t][r]*u);i.elements[n]=e}}return i},toUpperTriangular:function(){return this.toRightTriangular()},determinant:function(){if(!this.isSquare())return null;if(1==this.cols&&1==this.rows)return this.row(1);if(0==this.cols&&0==this.rows)return 1;for(var e=this.toRightTriangular(),t=e.elements[0][0],n=e.elements.length,r=1;r<n;r++)t*=e.elements[r][r];return t},det:function(){return this.determinant()},isSingular:function(){return this.isSquare()&&0===this.determinant()},trace:function(){if(!this.isSquare())return null;for(var e=this.elements[0][0],t=this.elements.length,n=1;n<t;n++)e+=this.elements[n][n];return e},tr:function(){return this.trace()},rank:function(){for(var e,t=this.toRightTriangular(),n=0,i=this.elements.length,o=this.elements[0].length;i--;)for(e=o;e--;)if(Math.abs(t.elements[i][e])>r.precision){n++;break}return n},rk:function(){return this.rank()},augment:function(e){var t=e.elements||e;void 0===t[0][0]&&(t=a.create(t).elements);var n,r=this.dup(),i=r.elements[0].length,o=r.elements.length,s=t[0].length;if(o!=t.length)return null;for(;o--;)for(n=s;n--;)r.elements[o][i+n]=t[o][n];return r},inverse:function(){if(!this.isSquare()||this.isSingular())return null;for(var e,t,n,r,i,o=this.elements.length,s=o,u=this.augment(a.I(o)).toRightTriangular(),l=u.elements[0].length,c=[];s--;){for(n=[],c[s]=[],r=u.elements[s][s],t=0;t<l;t++)i=u.elements[s][t]/r,n.push(i),t>=o&&c[s].push(i);for(u.elements[s]=n,e=s;e--;){for(n=[],t=0;t<l;t++)n.push(u.elements[e][t]-u.elements[s][t]*u.elements[e][s]);u.elements[e]=n}}return a.create(c)},inv:function(){return this.inverse()},round:function(){return this.map(function(e){return Math.round(e)})},snapTo:function(e){return this.map(function(t){return Math.abs(t-e)<=r.precision?e:t})},inspect:function(){for(var e=[],t=this.elements.length,n=0;n<t;n++)e.push($V(this.elements[n]).inspect());return e.join("\n")},toArray:function(){for(var e=[],t=this.elements.length,n=0;n<t;n++)e.push(this.elements[n]);return e},setElements:function(e){var t,n,r=e.elements||e;if(void 0!==r[0][0]){for(t=r.length,this.elements=[];t--;)for(n=r[t].length,this.elements[t]=[];n--;)this.elements[t][n]=r[t][n];return this}var i=r.length;for(this.elements=[],t=0;t<i;t++)this.elements.push([r[t]]);return this},maxColumnIndexes:function(){for(var e=[],t=1;t<=this.rows();t++){for(var n=null,r=-1,i=1;i<=this.cols();i++)(null===n||this.e(t,i)>n)&&(n=this.e(t,i),r=i);e.push(r)}return $V(e)},maxColumns:function(){for(var e=[],t=1;t<=this.rows();t++){for(var n=null,r=1;r<=this.cols();r++)(null===n||this.e(t,r)>n)&&(n=this.e(t,r));e.push(n)}return $V(e)},minColumnIndexes:function(){for(var e=[],t=1;t<=this.rows();t++){for(var n=null,r=-1,i=1;i<=this.cols();i++)(null===n||this.e(t,i)<n)&&(n=this.e(t,i),r=i);e.push(r)}return $V(e)},minColumns:function(){for(var e=[],t=1;t<=this.rows();t++){for(var n=null,r=1;r<=this.cols();r++)(null===n||this.e(t,r)<n)&&(n=this.e(t,r));e.push(n)}return $V(e)},partialPivot:function(e,t,n,r,i){for(var o=0,s=0,u=e;u<=r.rows();u++)Math.abs(r.e(u,t))>s&&(s=Math.abs(r.e(e,t)),o=u);if(o!=e){var a=r.elements[e-1];r.elements[e-1]=r.elements[o-1],r.elements[o-1]=a,n.elements[e-1][e-1]=0,n.elements[e-1][o-1]=1,n.elements[o-1][o-1]=0,n.elements[o-1][e-1]=1}return n},forwardSubstitute:function(e){for(var t=[],n=1;n<=this.rows();n++){for(var r=0,i=1;i<n;i++)r+=this.e(n,i)*t[i-1];t.push((e.e(n)-r)/this.e(n,n))}return $V(t)},backSubstitute:function(e){for(var t=[],n=this.rows();n>0;n--){for(var r=0,i=this.cols();i>n;i--)r+=this.e(n,i)*t[this.rows()-i];t.push((e.e(n)-r)/this.e(n,n))}return $V(t.reverse())},luJs:l,svdJs:s,qrJs:u},a.prototype.svd=s,a.prototype.qr=u,a.prototype.lu=l,a.create=function(e){return(new a).setElements(e)},a.I=function(e){for(var t,n=[],r=e;r--;)for(t=e,n[r]=[];t--;)n[r][t]=r==t?1:0;return a.create(n)},a.loadFile=function(e){for(var t=[],r=n(32).readFileSync(e,"utf-8").split("\n"),i=0;i<r.length;i++){var o=r[i].split(",");o.length>1&&t.push(o)}return(new a).setElements(t)},a.Diagonal=function(e){for(var t=e.length,n=a.I(t);t--;)n.elements[t][t]=e[t];return n},a.Rotation=function(e,t){if(!t)return a.create([[Math.cos(e),-Math.sin(e)],[Math.sin(e),Math.cos(e)]]);var n=t.dup();if(3!=n.elements.length)return null;var r=n.modulus(),i=n.elements[0]/r,o=n.elements[1]/r,s=n.elements[2]/r,u=Math.sin(e),l=Math.cos(e),c=1-l;return a.create([[c*i*i+l,c*i*o-u*s,c*i*s+u*o],[c*i*o+u*s,c*o*o+l,c*o*s-u*i],[c*i*s-u*o,c*o*s+u*i,c*s*s+l]])},a.RotationX=function(e){var t=Math.cos(e),n=Math.sin(e);return a.create([[1,0,0],[0,t,-n],[0,n,t]])},a.RotationY=function(e){var t=Math.cos(e),n=Math.sin(e);return a.create([[t,0,n],[0,1,0],[-n,0,t]])},a.RotationZ=function(e){var t=Math.cos(e),n=Math.sin(e);return a.create([[t,-n,0],[n,t,0],[0,0,1]])},a.Random=function(e,t){return 1===arguments.length&&(t=e),a.Zero(e,t).map(function(){return Math.random()})},a.Fill=function(e,t,n){2===arguments.length&&(n=t,t=e);for(var r,i=[],o=e;o--;)for(r=t,i[o]=[];r--;)i[o][r]=n;return a.create(i)},a.Zero=function(e,t){return a.Fill(e,t,0)},a.Zeros=function(e,t){return a.Zero(e,t)},a.One=function(e,t){return a.Fill(e,t,1)},a.Ones=function(e,t){return a.One(e,t)},e.exports=a},function(e,t,n){var r=n(18);function i(e,t){this[t]=e}e.exports=function(e,t){for(var n,o=0,s=arguments.length;++o<s;)null!=(n=arguments[o])&&r(n,i,e);return e}},function(e,t,n){"use strict";var r=n(3),i=n(30),o=n(28),s=n(2),u=n(5),a=n(23),l=/^Implements|Extends|Binds$/;e.exports=function(e){"Function"===s(e)&&(e={initialize:e});var t=e.Extends,n=r(e,"initialize")?e.initialize:t||function(){},c=function(){var t=this;for(var r in e.Binds&&e.Binds.forEach(function(e){var n=t[e];n&&(t[e]=u(t[e].bind(t),n))}),c.prototype){var i=c.prototype[r],a=s(i);r.match(l)||"Function"===a||"GeneratorFunction"==a||(t[r]="Object"==a?o({},t[r]):"Array"==a?i.slice():i)}e.Implements&&e.Implements.forEach(function(e){e.call(t)}),n.apply(this,arguments)};if(t){var h=t.prototype;h.Binds&&(e.Binds=(e.Binds||[]).concat(h.Binds)),h.Implements&&(e.Implements=(e.Implements||[]).concat(h.Implements));var m=c.prototype=i(h);c.parent=h,m.constructor=c}return e.Implements&&("Array"!==s(e.Implements)&&(e.Implements=[e.Implements]),e.Implements.forEach(function(e){a(c,e.prototype)})),a(c,e),e.Binds&&(c.prototype.Binds=e.Binds),e.Implements&&(c.prototype.Implements=e.Implements),c}},function(e,t,n){var r=n(1),i=n(4),o=n(19),s=n(0);function u(){}u.prototype={eql:function(e){return this.isParallelTo(e)&&this.contains(e.anchor)},dup:function(){return u.create(this.anchor,this.direction)},translate:function(e){var t=e.elements||e;return u.create([this.anchor.elements[0]+t[0],this.anchor.elements[1]+t[1],this.anchor.elements[2]+(t[2]||0)],this.direction)},isParallelTo:function(e){if(e.normal||e.start&&e.end)return e.isParallelTo(this);var t=this.direction.angleFrom(e.direction);return Math.abs(t)<=s.precision||Math.abs(t-Math.PI)<=s.precision},distanceFrom:function(e){if(e.normal||e.start&&e.end)return e.distanceFrom(this);if(e.direction){if(this.isParallelTo(e))return this.distanceFrom(e.anchor);var t=this.direction.cross(e.direction).toUnitVector().elements,n=this.anchor.elements,r=e.anchor.elements;return Math.abs((n[0]-r[0])*t[0]+(n[1]-r[1])*t[1]+(n[2]-r[2])*t[2])}var i=e.elements||e,o=(n=this.anchor.elements,this.direction.elements),s=i[0]-n[0],u=i[1]-n[1],a=(i[2]||0)-n[2],l=Math.sqrt(s*s+u*u+a*a);if(0===l)return 0;var c=(s*o[0]+u*o[1]+a*o[2])/l,h=1-c*c;return Math.abs(l*Math.sqrt(h<0?0:h))},contains:function(e){if(e.start&&e.end)return this.contains(e.start)&&this.contains(e.end);var t=this.distanceFrom(e);return null!==t&&t<=s.precision},positionOf:function(e){if(!this.contains(e))return null;var t=e.elements||e,n=this.anchor.elements,r=this.direction.elements;return(t[0]-n[0])*r[0]+(t[1]-n[1])*r[1]+((t[2]||0)-n[2])*r[2]},liesIn:function(e){return e.contains(this)},intersects:function(e){return e.normal?e.intersects(this):!this.isParallelTo(e)&&this.distanceFrom(e)<=s.precision},intersectionWith:function(e){if(e.normal||e.start&&e.end)return e.intersectionWith(this);if(!this.intersects(e))return null;var t=this.anchor.elements,n=this.direction.elements,i=e.anchor.elements,o=e.direction.elements,s=n[0],u=n[1],a=n[2],l=o[0],c=o[1],h=o[2],m=t[0]-i[0],f=t[1]-i[1],p=t[2]-i[2],d=l*l+c*c+h*h,g=s*l+u*c+a*h,E=((-s*m-u*f-a*p)*d/(s*s+u*u+a*a)+g*(l*m+c*f+h*p))/(d-g*g);return r.create([t[0]+E*s,t[1]+E*u,t[2]+E*a])},pointClosestTo:function(e){if(e.start&&e.end)return null===(m=e.pointClosestTo(this))?null:this.pointClosestTo(m);if(e.direction){if(this.intersects(e))return this.intersectionWith(e);if(this.isParallelTo(e))return null;var t=this.direction.elements,n=e.direction.elements,i=t[0],s=t[1],u=t[2],a=n[0],l=n[1],c=n[2],h=[(E=u*a-i*c)*c-(_=i*l-s*a)*l,_*a-(v=s*c-u*l)*c,v*l-E*a];return(m=o.create(e.anchor,h)).intersectionWith(this)}var m=e.elements||e;if(this.contains(m))return r.create(m);var f=this.anchor.elements,p=(i=(t=this.direction.elements)[0],s=t[1],u=t[2],f[0]),d=f[1],g=f[2],E=i*(m[1]-d)-s*(m[0]-p),_=s*((m[2]||0)-g)-u*(m[1]-d),v=u*(m[0]-p)-i*((m[2]||0)-g),y=r.create([s*E-u*v,u*_-i*E,i*v-s*_]),M=this.distanceFrom(m)/y.modulus();return r.create([m[0]+y.elements[0]*M,m[1]+y.elements[1]*M,(m[2]||0)+y.elements[2]*M])},rotate:function(e,t){void 0===t.direction&&(t=u.create(t.to3D(),r.k));var n=i.Rotation(e,t.direction).elements,o=t.pointClosestTo(this.anchor).elements,s=this.anchor.elements,a=this.direction.elements,l=o[0],c=o[1],h=o[2],m=s[0]-l,f=s[1]-c,p=s[2]-h;return u.create([l+n[0][0]*m+n[0][1]*f+n[0][2]*p,c+n[1][0]*m+n[1][1]*f+n[1][2]*p,h+n[2][0]*m+n[2][1]*f+n[2][2]*p],[n[0][0]*a[0]+n[0][1]*a[1]+n[0][2]*a[2],n[1][0]*a[0]+n[1][1]*a[1]+n[1][2]*a[2],n[2][0]*a[0]+n[2][1]*a[1]+n[2][2]*a[2]])},reverse:function(){return u.create(this.anchor,this.direction.x(-1))},reflectionIn:function(e){if(e.normal){var t=this.anchor.elements,n=this.direction.elements,r=t[0],i=t[1],o=t[2],s=n[0],a=n[1],l=n[2],c=this.anchor.reflectionIn(e).elements,h=r+s,m=i+a,f=o+l,p=e.pointClosestTo([h,m,f]).elements,d=[p[0]+(p[0]-h)-c[0],p[1]+(p[1]-m)-c[1],p[2]+(p[2]-f)-c[2]];return u.create(c,d)}if(e.direction)return this.rotate(Math.PI,e);var g=e.elements||e;return u.create(this.anchor.reflectionIn([g[0],g[1],g[2]||0]),this.direction)},setVectors:function(e,t){if(e=r.create(e),t=r.create(t),2==e.elements.length&&e.elements.push(0),2==t.elements.length&&t.elements.push(0),e.elements.length>3||t.elements.length>3)return null;var n=t.modulus();return 0===n?null:(this.anchor=e,this.direction=r.create([t.elements[0]/n,t.elements[1]/n,t.elements[2]/n]),this)}},u.create=function(e,t){return(new u).setVectors(e,t)},u.X=u.create(r.Zero(3),r.i),u.Y=u.create(r.Zero(3),r.j),u.Z=u.create(r.Zero(3),r.k),e.exports=u},function(e,t,n){var r=Function("return this")();t.Vector=n(1),r.$V=t.Vector.create,t.Matrix=n(4),r.$M=t.Matrix.create,t.Line=n(7),r.$L=t.Line.create,t.Plane=n(19),r.$P=t.Plane.create,t.Line.Segment=n(31),t.Sylvester=n(0)},function(e,t,n){"use strict";var r=n(10),i=n(14),o=n(33).makePerspective,s=n(8).Matrix,u=n(6),a=n(16),l=n(12),c=n(11),h=r.createFromSource("x-shader/x-vertex","   attribute vec3 aVertexPosition;   attribute vec2 aTextureCoord;   uniform mat4 uMVMatrix;   uniform mat4 uPMatrix;   varying highp vec2 vTextureCoord;   void main(void) {     gl_Position = uPMatrix * uMVMatrix * vec4(aVertexPosition, 1.0);     vTextureCoord = aTextureCoord;   } "),m=r.createFromSource("x-shader/x-fragment","   precision highp float;   varying highp vec2 vTextureCoord;   uniform sampler2D texture;   void main(void) {     gl_FragColor = texture2D(texture, vTextureCoord);   } "),f=new u({initialize:function(e,t,n){this.canvas=e,this.size=t,this.canvas.width=t.w,this.canvas.height=t.h,this.onInitWebGL(),this.onInitShaders(),this.initBuffers(),n&&this.initFramebuffer(),this.onInitTextures(),this.initScene()},initFramebuffer:function(){var e=this.gl;this.framebuffer=e.createFramebuffer(),e.bindFramebuffer(e.FRAMEBUFFER,this.framebuffer),this.framebufferTexture=new c(this.gl,this.size,e.RGBA);var t=e.createRenderbuffer();e.bindRenderbuffer(e.RENDERBUFFER,t),e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_COMPONENT16,this.size.w,this.size.h),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,this.framebufferTexture.texture,0),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.RENDERBUFFER,t)},initBuffers:function(){var e,t=this.gl;this.quadVPBuffer=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.quadVPBuffer),e=[1,1,0,-1,1,0,1,-1,0,-1,-1,0],t.bufferData(t.ARRAY_BUFFER,new Float32Array(e),t.STATIC_DRAW),this.quadVPBuffer.itemSize=3,this.quadVPBuffer.numItems=4,this.quadVTCBuffer=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.quadVTCBuffer),e=[1,0,0,0,1,1,0,1],t.bufferData(t.ARRAY_BUFFER,new Float32Array(e),t.STATIC_DRAW)},mvIdentity:function(){this.mvMatrix=s.I(4)},mvMultiply:function(e){this.mvMatrix=this.mvMatrix.x(e)},mvTranslate:function(e){this.mvMultiply(s.Translation($V([e[0],e[1],e[2]])).ensure4x4())},setMatrixUniforms:function(){this.program.setMatrixUniform("uPMatrix",new Float32Array(this.perspectiveMatrix.flatten())),this.program.setMatrixUniform("uMVMatrix",new Float32Array(this.mvMatrix.flatten()))},initScene:function(){var e=this.gl;this.perspectiveMatrix=o(45,1,.1,100),this.mvIdentity(),this.mvTranslate([0,0,-2.4]),e.bindBuffer(e.ARRAY_BUFFER,this.quadVPBuffer),e.vertexAttribPointer(this.vertexPositionAttribute,3,e.FLOAT,!1,0,0),e.bindBuffer(e.ARRAY_BUFFER,this.quadVTCBuffer),e.vertexAttribPointer(this.textureCoordAttribute,2,e.FLOAT,!1,0,0),this.onInitSceneTextures(),this.setMatrixUniforms(),this.framebuffer&&(console.log("Bound Frame Buffer"),e.bindFramebuffer(e.FRAMEBUFFER,this.framebuffer))},toString:function(){return"WebGLCanvas Size: "+this.size},checkLastError:function(e){var t=this.gl.getError();if(t!=this.gl.NO_ERROR){var n=this.glNames[t];n=void 0!==n?n+"("+t+")":"Unknown WebGL ENUM (0x"+value.toString(16)+")",e?console.log("WebGL Error: %s, %s",e,n):console.log("WebGL Error: %s",n),console.trace()}},onInitWebGL:function(){try{this.gl=this.canvas.getContext("experimental-webgl")||this.canvas.getContext("webgl")}catch(e){}if(this.gl||i("Unable to initialize WebGL. Your browser may not support it."),!this.glNames)for(var e in this.glNames={},this.gl)"number"==typeof this.gl[e]&&(this.glNames[this.gl[e]]=e)},onInitShaders:function(){this.program=new a(this.gl),this.program.attach(new l(this.gl,h)),this.program.attach(new l(this.gl,m)),this.program.link(),this.program.use(),this.vertexPositionAttribute=this.program.getAttributeLocation("aVertexPosition"),this.gl.enableVertexAttribArray(this.vertexPositionAttribute),this.textureCoordAttribute=this.program.getAttributeLocation("aTextureCoord"),this.gl.enableVertexAttribArray(this.textureCoordAttribute)},onInitTextures:function(){var e=this.gl;this.texture=new c(e,this.size,e.RGBA)},onInitSceneTextures:function(){this.texture.bind(0,this.program,"texture")},drawScene:function(){var e=this.gl;e.bindBuffer(e.ARRAY_BUFFER,this.quadVPBuffer),e.vertexAttribPointer(this.vertexPositionAttribute,3,e.FLOAT,!1,0,0),e.bindBuffer(e.ARRAY_BUFFER,this.quadVTCBuffer),e.vertexAttribPointer(this.textureCoordAttribute,2,e.FLOAT,!1,0,0),this.setMatrixUniforms(),this.gl.drawArrays(this.gl.TRIANGLE_STRIP,0,4)},readPixels:function(e){var t=this.gl;t.readPixels(0,0,this.size.w,this.size.h,t.RGBA,t.UNSIGNED_BYTE,e)},bindFrameBuffer:function(){var e=this.gl;e.bindFramebuffer(e.FRAMEBUFFER,this.framebuffer)}});e.exports=f},function(e,t,n){"use strict";var r=n(15);function i(){}i.createFromElementId=function(e){var t=document.getElementById(e);r(t,"Could not find shader with ID: "+e);for(var n="",i=t.firstChild;i;)3==i.nodeType&&(n+=i.textContent),i=i.nextSibling;var o=new Scriptor;return o.type=t.type,o.source=n,o},i.createFromSource=function(e,t){var n=new i;return n.type=e,n.source=t,n},e.exports=i},function(e,t,n){"use strict";var r=n(15);function i(e,t,n){this.gl=e,this.size=t,this.texture=e.createTexture(),e.bindTexture(e.TEXTURE_2D,this.texture),this.format=n||e.LUMINANCE,e.texImage2D(e.TEXTURE_2D,0,this.format,t.w,t.h,0,this.format,e.UNSIGNED_BYTE,null),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE)}var o=null;i.prototype={fill:function(e,t){var n=this.gl;r(e.length>=this.size.w*this.size.h,"Texture size mismatch, data:"+e.length+", texture: "+this.size.w*this.size.h),n.bindTexture(n.TEXTURE_2D,this.texture),n.texSubImage2D(n.TEXTURE_2D,0,0,0,this.size.w,this.size.h,this.format,n.UNSIGNED_BYTE,e)},bind:function(e,t,n){var r=this.gl;o||(o=[r.TEXTURE0,r.TEXTURE1,r.TEXTURE2]),r.activeTexture(o[e]),r.bindTexture(r.TEXTURE_2D,this.texture),r.uniform1i(r.getUniformLocation(t.program,n),e)}},e.exports=i},function(e,t,n){"use strict";var r=n(14);e.exports=function(e,t){if("x-shader/x-fragment"==t.type)this.shader=e.createShader(e.FRAGMENT_SHADER);else{if("x-shader/x-vertex"!=t.type)return void r("Unknown shader type: "+t.type);this.shader=e.createShader(e.VERTEX_SHADER)}e.shaderSource(this.shader,t.source),e.compileShader(this.shader),e.getShaderParameter(this.shader,e.COMPILE_STATUS)||r("An error occurred compiling the shaders: "+e.getShaderInfoLog(this.shader))}},function(e,t,n){"use strict";function r(e,t){this.w=e,this.h=t}r.prototype={toString:function(){return"("+this.w+", "+this.h+")"},getHalfSize:function(){return new r(this.w>>>1,this.h>>>1)},length:function(){return this.w*this.h}},e.exports=r},function(e,t,n){"use strict";e.exports=function(e){console.error(e),console.trace()}},function(e,t,n){"use strict";var r=n(14);e.exports=function(e,t){e||r(t)}},function(e,t,n){"use strict";var r=n(15);function i(e){this.gl=e,this.program=this.gl.createProgram()}i.prototype={attach:function(e){this.gl.attachShader(this.program,e.shader)},link:function(){this.gl.linkProgram(this.program),r(this.gl.getProgramParameter(this.program,this.gl.LINK_STATUS),"Unable to initialize the shader program.")},use:function(){this.gl.useProgram(this.program)},getAttributeLocation:function(e){return this.gl.getAttribLocation(this.program,e)},setMatrixUniform:function(e,t){var n=this.gl.getUniformLocation(this.program,e);this.gl.uniformMatrix4fv(n,!1,t)}},e.exports=i},function(e,t){e.exports=function(e){return!!e&&"object"==typeof e&&e.constructor===Object}},function(e,t,n){var r=n(3),i=n(29);e.exports=function(e,t,n){i(e,function(i,o){if(r(e,o))return t.call(n,e[o],o,e)})}},function(e,t,n){var r=n(1),i=n(4),o=n(7),s=n(0);function u(){}u.prototype={eql:function(e){return this.contains(e.anchor)&&this.isParallelTo(e)},dup:function(){return u.create(this.anchor,this.normal)},translate:function(e){var t=e.elements||e;return u.create([this.anchor.elements[0]+t[0],this.anchor.elements[1]+t[1],this.anchor.elements[2]+(t[2]||0)],this.normal)},isParallelTo:function(e){var t;return e.normal?(t=this.normal.angleFrom(e.normal),Math.abs(t)<=s.precision||Math.abs(Math.PI-t)<=s.precision):e.direction?this.normal.isPerpendicularTo(e.direction):null},isPerpendicularTo:function(e){var t=this.normal.angleFrom(e.normal);return Math.abs(Math.PI/2-t)<=s.precision},distanceFrom:function(e){if(this.intersects(e)||this.contains(e))return 0;if(e.anchor){var t=this.anchor.elements,n=e.anchor.elements,r=this.normal.elements;return Math.abs((t[0]-n[0])*r[0]+(t[1]-n[1])*r[1]+(t[2]-n[2])*r[2])}var i=e.elements||e;return t=this.anchor.elements,r=this.normal.elements,Math.abs((t[0]-i[0])*r[0]+(t[1]-i[1])*r[1]+(t[2]-(i[2]||0))*r[2])},contains:function(e){if(e.normal)return null;if(e.direction)return this.contains(e.anchor)&&this.contains(e.anchor.add(e.direction));var t=e.elements||e,n=this.anchor.elements,r=this.normal.elements;return Math.abs(r[0]*(n[0]-t[0])+r[1]*(n[1]-t[1])+r[2]*(n[2]-(t[2]||0)))<=s.precision},intersects:function(e){return void 0===e.direction&&void 0===e.normal?null:!this.isParallelTo(e)},intersectionWith:function(e){if(!this.intersects(e))return null;if(e.direction){var t=e.anchor.elements,n=e.direction.elements,s=this.anchor.elements,u=((l=this.normal.elements)[0]*(s[0]-t[0])+l[1]*(s[1]-t[1])+l[2]*(s[2]-t[2]))/(l[0]*n[0]+l[1]*n[1]+l[2]*n[2]);return r.create([t[0]+n[0]*u,t[1]+n[1]*u,t[2]+n[2]*u])}if(e.normal){for(var a=this.normal.cross(e.normal).toUnitVector(),l=this.normal.elements,c=(t=this.anchor.elements,e.normal.elements),h=e.anchor.elements,m=i.Zero(2,2),f=0;m.isSingular();)f++,m=i.create([[l[f%3],l[(f+1)%3]],[c[f%3],c[(f+1)%3]]]);for(var p=m.inverse().elements,d=l[0]*t[0]+l[1]*t[1]+l[2]*t[2],g=c[0]*h[0]+c[1]*h[1]+c[2]*h[2],E=[p[0][0]*d+p[0][1]*g,p[1][0]*d+p[1][1]*g],_=[],v=1;v<=3;v++)_.push(f==v?0:E[(v+(5-f)%3)%3]);return o.create(_,a)}},pointClosestTo:function(e){var t=e.elements||e,n=this.anchor.elements,i=this.normal.elements,o=(n[0]-t[0])*i[0]+(n[1]-t[1])*i[1]+(n[2]-(t[2]||0))*i[2];return r.create([t[0]+i[0]*o,t[1]+i[1]*o,(t[2]||0)+i[2]*o])},rotate:function(e,t){var n=e.determinant?e.elements:i.Rotation(e,t.direction).elements,r=t.pointClosestTo(this.anchor).elements,o=this.anchor.elements,s=this.normal.elements,a=r[0],l=r[1],c=r[2],h=o[0]-a,m=o[1]-l,f=o[2]-c;return u.create([a+n[0][0]*h+n[0][1]*m+n[0][2]*f,l+n[1][0]*h+n[1][1]*m+n[1][2]*f,c+n[2][0]*h+n[2][1]*m+n[2][2]*f],[n[0][0]*s[0]+n[0][1]*s[1]+n[0][2]*s[2],n[1][0]*s[0]+n[1][1]*s[1]+n[1][2]*s[2],n[2][0]*s[0]+n[2][1]*s[1]+n[2][2]*s[2]])},reflectionIn:function(e){if(e.normal){var t=this.anchor.elements,n=this.normal.elements,r=t[0],i=t[1],o=t[2],s=n[0],a=n[1],l=n[2],c=this.anchor.reflectionIn(e).elements,h=r+s,m=i+a,f=o+l,p=e.pointClosestTo([h,m,f]).elements,d=[p[0]+(p[0]-h)-c[0],p[1]+(p[1]-m)-c[1],p[2]+(p[2]-f)-c[2]];return u.create(c,d)}if(e.direction)return this.rotate(Math.PI,e);var g=e.elements||e;return u.create(this.anchor.reflectionIn([g[0],g[1],g[2]||0]),this.normal)},setVectors:function(e,t,n){if(null===(e=(e=r.create(e)).to3D()))return null;if(null===(t=(t=r.create(t)).to3D()))return null;if(void 0===n)n=null;else if(null===(n=(n=r.create(n)).to3D()))return null;var i,o,s=e.elements[0],u=e.elements[1],a=e.elements[2],l=t.elements[0],c=t.elements[1],h=t.elements[2];if(null!==n){var m=n.elements[0],f=n.elements[1],p=n.elements[2];if(0===(o=(i=r.create([(c-u)*(p-a)-(h-a)*(f-u),(h-a)*(m-s)-(l-s)*(p-a),(l-s)*(f-u)-(c-u)*(m-s)])).modulus()))return null;i=r.create([i.elements[0]/o,i.elements[1]/o,i.elements[2]/o])}else{if(0===(o=Math.sqrt(l*l+c*c+h*h)))return null;i=r.create([t.elements[0]/o,t.elements[1]/o,t.elements[2]/o])}return this.anchor=e,this.normal=i,this}},u.create=function(e,t,n){return(new u).setVectors(e,t,n)},u.XY=u.create(r.Zero(3),r.k),u.YZ=u.create(r.Zero(3),r.i),u.ZX=u.create(r.Zero(3),r.j),u.YX=u.XY,u.ZY=u.YZ,u.XZ=u.ZX,u.fromPoints=function(e){var t,n,i,o,a,l,c,h,m,f,p=e.length,d=[],g=r.Zero(3);for(t=0;t<p;t++){if(null===(n=r.create(e[t]).to3D()))return null;if(d.push(n),(i=d.length)>2){if(a=d[i-1].elements,l=d[i-2].elements,c=d[i-3].elements,o=r.create([(a[1]-l[1])*(c[2]-l[2])-(a[2]-l[2])*(c[1]-l[1]),(a[2]-l[2])*(c[0]-l[0])-(a[0]-l[0])*(c[2]-l[2]),(a[0]-l[0])*(c[1]-l[1])-(a[1]-l[1])*(c[0]-l[0])]).toUnitVector(),i>3&&null!==(m=o.angleFrom(f))&&!(Math.abs(m)<=s.precision||Math.abs(m-Math.PI)<=s.precision))return null;g=g.add(o),f=o}}return a=d[1].elements,l=d[0].elements,c=d[i-1].elements,h=d[i-2].elements,g=g.add(r.create([(a[1]-l[1])*(c[2]-l[2])-(a[2]-l[2])*(c[1]-l[1]),(a[2]-l[2])*(c[0]-l[0])-(a[0]-l[0])*(c[2]-l[2]),(a[0]-l[0])*(c[1]-l[1])-(a[1]-l[1])*(c[0]-l[0])]).toUnitVector()).add(r.create([(l[1]-c[1])*(h[2]-c[2])-(l[2]-c[2])*(h[1]-c[1]),(l[2]-c[2])*(h[0]-c[0])-(l[0]-c[0])*(h[2]-c[2]),(l[0]-c[0])*(h[1]-c[1])-(l[1]-c[1])*(h[0]-c[0])]).toUnitVector()),u.create(d[0],g)},e.exports=u},function(e,t){e.exports=require("ref")},function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.DISABLED=0]="DISABLED",e[e.FATAL=1]="FATAL",e[e.ERROR=10]="ERROR",e[e.WARNING=20]="WARNING",e[e.INFO=40]="INFO",e[e.DEBUG=50]="DEBUG",e[e.VERBOSE=60]="VERBOSE"}(r=t.LogLevel||(t.LogLevel={}));var i=function(){function e(){e._logLevel=r.INFO}return e.setLogLevel=function(e){this._logLevel=e},e.getLogLevel=function(){return this._logLevel},e.getNowFormatDate=function(){var e,t,n=new Date,r=n.getMonth()+1,i=n.getDate();return e=r>=1&&r<=9?"0"+r:""+r,t=i>=0&&i<=9?"0"+i:""+i,n.getFullYear()+"-"+e+"-"+t+" "+n.getHours()+":"+n.getMinutes()+":"+n.getSeconds()+":"+n.getMilliseconds()},e.LOGI=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];e._logLevel<r.INFO||("Microsoft Internet Explorer"==navigator.appName&&parseInt(navigator.appVersion.split(";")[1].replace(/[ ]/g,"").replace("MSIE",""))<11?console.log("YouMeVideo -INFO- "+this.getNowFormatDate()+t):console.log.apply(console,["YouMeVideo -INFO- ",this.getNowFormatDate()].concat(t)))},e.LOGW=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];e._logLevel<r.WARNING||("Microsoft Internet Explorer"==navigator.appName&&parseInt(navigator.appVersion.split(";")[1].replace(/[ ]/g,"").replace("MSIE",""))<11?console.warn("YouMeVideo -WARNING- "+this.getNowFormatDate()+t):console.warn.apply(console,["YouMeVideo -WARNING- ",this.getNowFormatDate()].concat(t)))},e.LOGE=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];e._logLevel<r.ERROR||("Microsoft Internet Explorer"==navigator.appName&&parseInt(navigator.appVersion.split(";")[1].replace(/[ ]/g,"").replace("MSIE",""))<11?console.error("YouMeVideo -ERROR- "+this.getNowFormatDate()+t):console.error.apply(console,["YouMeVideo -ERROR- ",this.getNowFormatDate()].concat(t)))},e._logLevel=r.INFO,e}();t.YMLogUtils=i},function(e,t,n){"use strict";var r=n(16),i=n(13),o=n(12),s=n(11),u=n(10),a=n(9),l=n(6),c=u.createFromSource("x-shader/x-vertex","   attribute vec3 aVertexPosition;   attribute vec2 aTextureCoord;   uniform mat4 uMVMatrix;   uniform mat4 uPMatrix;   varying highp vec2 vTextureCoord;   void main(void) {     gl_Position = uPMatrix * uMVMatrix * vec4(aVertexPosition, 1.0);     vTextureCoord = aTextureCoord;   } "),h=u.createFromSource("x-shader/x-fragment","   precision highp float;   varying highp vec2 vTextureCoord;   uniform sampler2D YTexture;   uniform sampler2D UTexture;   uniform sampler2D VTexture;   const mat4 YUV2RGB = mat4   (    1.1643828125, 0, 1.59602734375, -.87078515625,    1.1643828125, -.39176171875, -.81296875, .52959375,    1.1643828125, 2.017234375, 0, -1.081390625,    0, 0, 0, 1   );   void main(void) {    gl_FragColor = vec4( texture2D(YTexture,  vTextureCoord).x, texture2D(UTexture, vTextureCoord).x, texture2D(VTexture, vTextureCoord).x, 1) * YUV2RGB;   } "),m=new l({Extends:a,Binds:["decode"],initialize:function(e,t){this.canvas=e,this.canvas.width=t.w,this.canvas.height=t.h,this.fmt=0},resize:function(e){this.size&&this.size.w===e.w&&this.size.h===e.h||m.parent.initialize.call(this,this.canvas,e)},onInitShaders:function(){this.program=new r(this.gl),this.program.attach(new o(this.gl,c)),this.program.attach(new o(this.gl,h)),this.program.link(),this.program.use(),this.vertexPositionAttribute=this.program.getAttributeLocation("aVertexPosition"),this.gl.enableVertexAttribArray(this.vertexPositionAttribute),this.textureCoordAttribute=this.program.getAttributeLocation("aTextureCoord"),this.gl.enableVertexAttribArray(this.textureCoordAttribute)},onInitTextures:function(){this.gl,this.YTexture=new s(this.gl,this.size,!1),this.UTexture=new s(this.gl,this.size.getHalfSize(),!1),this.VTexture=new s(this.gl,this.size.getHalfSize(),!1)},onInitSceneTextures:function(){this.YTexture.bind(0,this.program,"YTexture"),this.UTexture.bind(1,this.program,"UTexture"),this.VTexture.bind(2,this.program,"VTexture")},fillYUVTextures:function(e,t,n){this.YTexture.fill(e),this.UTexture.fill(t),this.VTexture.fill(n)},decode:function(e,t,n){if(e){this.resize(new i(t,n)),this.bindFrameBuffer();var r=t*n,o=r>>2;this.YTexture.fill(e.subarray(0,r)),this.UTexture.fill(e.subarray(r,r+o)),this.VTexture.fill(e.subarray(r+o,r+2*o)),this.drawScene()}},toString:function(){return"YUVCanvas Size: "+this.size}});e.exports=m},function(e,t,n){"use strict";var r=/^Implements|Extends|Binds$/;e.exports=function(e,t){for(var n in t)n.match(r)||("function"==typeof t[n]&&t[n].$static?e[n]=t[n]:e.prototype[n]=t[n]);return e}},function(e,t,n){var r=n(2);e.exports=function(e,t){return r(e)===t}},function(e,t,n){var r=n(24);e.exports=function(e){return r(e,"Object")}},function(e,t,n){var r=n(2),i=n(17),o=n(5);e.exports=function(e){switch(r(e)){case"Object":return function(e){return i(e)?o({},e):e}(e);case"Array":return function(e){return e.slice()}(e);case"RegExp":return function(e){var t="";return t+=e.multiline?"m":"",t+=e.global?"g":"",t+=e.ignoreCase?"i":"",new RegExp(e.source,t)}(e);case"Date":return function(e){return new Date(+e)}(e);default:return e}}},function(e,t,n){var r=n(26),i=n(18),o=n(2),s=n(17);e.exports=function e(t,n){switch(o(t)){case"Object":return function(t,n){if(s(t)){var r={};return i(t,function(t,r){this[r]=e(t,n)},r),r}return n?n(t):t}(t,n);case"Array":return function(t,n){for(var r=[],i=-1,o=t.length;++i<o;)r[i]=e(t[i],n);return r}(t,n);default:return r(t)}}},function(e,t,n){var r=n(3),i=n(27),o=n(25);e.exports=function e(){var t,n,s,u,a=1;for(u=i(arguments[0]);s=arguments[a++];)for(t in s)r(s,t)&&(n=s[t],o(n)&&o(u[t])?u[t]=e(u[t],n):u[t]=i(n));return u}},function(e,t,n){var r,i,o=n(3);function s(e,t,n,r){return e.call(r,t[n],n,t)}e.exports=function(e,t,n){var u,a=0;for(u in null==r&&function(){for(var e in i=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],r=!0,{toString:null})r=!1}(),e)if(!1===s(t,e,u,n))break;if(r)for(var l=e.constructor,c=!!l&&e===l.prototype;(u=i[a++])&&("constructor"===u&&(c||!o(e,u))||e[u]===Object.prototype[u]||!1!==s(t,e,u,n)););}},function(e,t,n){var r=n(5);e.exports=function(e,t){function n(){}return n.prototype=e,r(new n,t)}},function(e,t,n){var r=n(7),i=n(1);r.Segment=function(){},r.Segment.prototype={eql:function(e){return this.start.eql(e.start)&&this.end.eql(e.end)||this.start.eql(e.end)&&this.end.eql(e.start)},dup:function(){return r.Segment.create(this.start,this.end)},length:function(){var e=this.start.elements,t=this.end.elements,n=t[0]-e[0],r=t[1]-e[1],i=t[2]-e[2];return Math.sqrt(n*n+r*r+i*i)},toVector:function(){var e=this.start.elements,t=this.end.elements;return i.create([t[0]-e[0],t[1]-e[1],t[2]-e[2]])},midpoint:function(){var e=this.start.elements,t=this.end.elements;return i.create([(t[0]+e[0])/2,(t[1]+e[1])/2,(t[2]+e[2])/2])},bisectingPlane:function(){return Plane.create(this.midpoint(),this.toVector())},translate:function(e){var t=e.elements||e,n=this.start.elements,i=this.end.elements;return r.Segment.create([n[0]+t[0],n[1]+t[1],n[2]+(t[2]||0)],[i[0]+t[0],i[1]+t[1],i[2]+(t[2]||0)])},isParallelTo:function(e){return this.line.isParallelTo(e)},distanceFrom:function(e){var t=this.pointClosestTo(e);return null===t?null:t.distanceFrom(e)},contains:function(e){if(e.start&&e.end)return this.contains(e.start)&&this.contains(e.end);var t=(e.elements||e).slice();if(2==t.length&&t.push(0),this.start.eql(t))return!0;var n=this.start.elements,r=i.create([n[0]-t[0],n[1]-t[1],n[2]-(t[2]||0)]),o=this.toVector();return r.isAntiparallelTo(o)&&r.modulus()<=o.modulus()},intersects:function(e){return null!==this.intersectionWith(e)},intersectionWith:function(e){if(!this.line.intersects(e))return null;var t=this.line.intersectionWith(e);return this.contains(t)?t:null},pointClosestTo:function(e){if(e.normal){var t=this.line.intersectionWith(e);return null===t?null:this.pointClosestTo(t)}var n=this.line.pointClosestTo(e);return null===n?null:this.contains(n)?n:(this.line.positionOf(n)<0?this.start:this.end).dup()},setPoints:function(e,t){return e=i.create(e).to3D(),t=i.create(t).to3D(),null===e||null===t?null:(this.line=r.create(e,t.subtract(e)),this.start=e,this.end=t,this)}},r.Segment.create=function(e,t){return(new r.Segment).setPoints(e,t)},e.exports=r.Segment},function(e,t){e.exports=require("fs")},function(e,t,n){"use strict";var r=n(8).Matrix,i=n(8).Vector,o=r.create;r.Translation=function(e){var t;if(2==e.elements.length)return(t=r.I(3)).elements[2][0]=e.elements[0],t.elements[2][1]=e.elements[1],t;if(3==e.elements.length)return(t=r.I(4)).elements[0][3]=e.elements[0],t.elements[1][3]=e.elements[1],t.elements[2][3]=e.elements[2],t;throw"Invalid length for Translation"},r.prototype.flatten=function(){var e=[];if(0==this.elements.length)return[];for(var t=0;t<this.elements[0].length;t++)for(var n=0;n<this.elements.length;n++)e.push(this.elements[n][t]);return e},r.prototype.ensure4x4=function(){if(4==this.elements.length&&4==this.elements[0].length)return this;if(this.elements.length>4||this.elements[0].length>4)return null;for(var e=0;e<this.elements.length;e++)for(var t=this.elements[e].length;t<4;t++)e==t?this.elements[e].push(1):this.elements[e].push(0);for(e=this.elements.length;e<4;e++)0==e?this.elements.push([1,0,0,0]):1==e?this.elements.push([0,1,0,0]):2==e?this.elements.push([0,0,1,0]):3==e&&this.elements.push([0,0,0,1]);return this},i.prototype.flatten=function(){return this.elements},e.exports.makePerspective=function(e,t,n,r){var i=n*Math.tan(e*Math.PI/360),s=-i;return function(e,t,n,r,i,s){return o([[2*i/(t-e),0,(t+e)/(t-e),0],[0,2*i/(r-n),(r+n)/(r-n),0],[0,0,-(s+i)/(s-i),-2*s*i/(s-i)],[0,0,-1,0]])}(s*t,i*t,s,i,n,r)}},function(e,t,n){"use strict";var r=n(16),i=n(13),o=n(12),s=n(11),u=n(10),a=n(9),l=n(6),c=u.createFromSource("x-shader/x-vertex","   attribute vec3 aVertexPosition;   attribute vec2 aTextureCoord;   uniform mat4 uMVMatrix;   uniform mat4 uPMatrix;   varying highp vec2 vTextureCoord;   void main(void) {     gl_Position = uPMatrix * uMVMatrix * vec4(aVertexPosition, 1.0);     vTextureCoord = aTextureCoord;   } "),h=u.createFromSource("x-shader/x-fragment","   precision highp float;   varying highp vec2 vTextureCoord;   uniform sampler2D texture;   void main(void) {     gl_FragColor = texture2D(texture, vTextureCoord).bgra;   } "),m=new l({Extends:a,Binds:["decode"],initialize:function(e,t){this.canvas=e,this.canvas.width=t.w,this.canvas.height=t.h,this.fmt=1},resize:function(e){this.size&&this.size.w===e.w&&this.size.h===e.h||m.parent.initialize.call(this,this.canvas,e)},onInitShaders:function(){this.program=new r(this.gl),this.program.attach(new o(this.gl,c)),this.program.attach(new o(this.gl,h)),this.program.link(),this.program.use(),this.vertexPositionAttribute=this.program.getAttributeLocation("aVertexPosition"),this.gl.enableVertexAttribArray(this.vertexPositionAttribute),this.textureCoordAttribute=this.program.getAttributeLocation("aTextureCoord"),this.gl.enableVertexAttribArray(this.textureCoordAttribute)},onInitTextures:function(){var e=this.gl;this.texture=new s(e,this.size,e.RGBA)},onInitSceneTextures:function(){this.texture.bind(0,this.program,"texture")},fillBGRATextures:function(e){this.texture.fill(e)},decode:function(e,t,n){if(e){this.resize(new i(t,n));var r=t*n*4;this.texture.fill(e.subarray(0,r)),this.drawScene()}},toString:function(){return"BRGACanvas Size: "+this.size}});e.exports=m},function(e,t){e.exports=require("events")},function(e,t){e.exports=require("path")},function(e,t){e.exports=require("os")},function(e,t){e.exports=require("ffi")},function(e,t,n){"use strict";const r=n(38),i=n(20),o=n(37);var s=o.platform(),u=o.arch(),a=n(36);const l=new(n(35));var c=n(34),h=(n(9),n(22)),m=n(13);let f=a.join(__dirname,"youme_voice_engine","macos","youme_voice_engine_mac");if("darwin"!==s){var p=r.Library("kernel32",{SetDllDirectoryA:["bool",["string"]]});"x64"===u?p.SetDllDirectoryA(a.join(__dirname,"youme_voice_engine","x86-64")):p.SetDllDirectoryA(a.join(__dirname,"youme_voice_engine","x86")),f="youme_voice_engine"}var d={youme_init:["int",["string","string","int","string"]],youme_setExternalInputMode:["void",["bool"]],youme_setAVStatisticInterval:["void",["int"]],youme_setVideoNetResolution:["int",["int","int"]],youme_setVideoLocalResolution:["int",["int","int"]],youme_getCbMessage2:["char *",[]],youme_freeCbMessage2:["void",["string"]],youme_joinChannelSingleMode:["int",["string","string","int"]],youme_getSDKVersion:["int",[]],youme_leaveChannelAll:["int",[]],youme_setToken:["void",["string"]],youme_setAudioQuality:["void",["int"]],youme_unInit:["int",[]],youme_setVolume:["void",["int"]],youme_getVolume:["uint",[]],youme_setMicrophoneMute:["void",["bool"]],youme_getMicrophoneMute:["bool",[]],youme_getSpeakerMute:["bool",[]],youme_setSpeakerMute:["void",["bool"]],youme_setOtherSpeakerMute:["int",["string","bool"]],youme_setOtherMicMute:["int",["string","bool"]],youme_setListenOtherVoice:["int",["string","bool"]],youme_setLogLevel:["int",["int","int"]],youme_setServerRegion:["void",["int","string","bool"]],youme_startCapture:["int",[]],youme_stopCapture:["int",[]],youme_setTestConfig:["void",["int"]],youme_setOutputToSpeaker:["int",["bool"]],youme_setAutoSendStatus:["void",["bool"]],youme_getUseMobileNetworkEnabled:["bool",[]],youme_setUseMobileNetworkEnabled:["void",["bool"]],youme_setUserLogPath:["int",["string"]],youme_playBackgroundMusic:["int",["string","bool"]],youme_pauseBackgroundMusic:["int",[]],youme_resumeBackgroundMusic:["int",[]],youme_stopBackgroundMusic:["int",[]],youme_setBackgroundMusicVolume:["int",["int"]],youme_setHeadsetMonitorOn:["int",["bool","bool"]],youme_setReverbEnabled:["int",["bool"]],youme_setVadCallbackEnabled:["int",["bool"]],youme_setMicLevelCallback:["int",["int"]],youme_setFarendVoiceLevelCallback:["int",["int"]],youme_setReleaseMicWhenMute:["int",["bool"]],youme_pauseChannel:["int",[]],youme_resumeChannel:["int",[]],youme_setRecordingTimeMs:["void",["uint"]],youme_setPlayingTimeMs:["void",["uint"]],youme_setServerMode:["void",["int"]],youme_requestRestApi:["int",["string","string",i.refType("int")]],youme_getChannelUserList:["int",["string","int","bool"]],youme_setUserRole:["int",["int"]],youme_getUserRole:["int",[]],youme_isBackgroundMusicPlaying:["bool",[]],youme_isInited:["bool",[]],youme_isInChannel:["bool",["string"]],youme_sendMessage:["int",["string","string",i.refType("int")]],youme_kickOtherFromChannel:["int",["string","string","int"]],youme_openVideoEncoder:["int",["string"]],youme_inputAudioFrame:["int",[i.refType("pointer"),"int","uint64"]],youme_inputVideoFrame:["int",[i.refType("pointer"),"int","int","int","int","int","int","uint64"]],youme_stopInputVideoFrame:["int",[]],youme_getVideoFrame:["char *",["string",i.refType("int"),i.refType("int"),i.refType("int")]],youme_setVideoCallback:["int",["string"]],youme_setVideoFps:["int",["int"]],youme_switchCamera:["int",[]],youme_resetCamera:["int",[]],youme_setCaptureFrontCameraEnable:["int",["bool"]],youme_maskVideoByUserId:["int",["string","bool"]],youme_setExternalInputSampleRate:["int",["int","int"]],youme_setVideoNetResolutionForSecond:["int",["int","int"]],youme_setVideoCodeBitrateForSecond:["void",["uint","uint"]],youme_getCurrentVideoCodeBitrate:["uint",[]],youme_setVideoHardwareCodeEnable:["void",["bool"]],youme_getVideoHardwareCodeEnable:["bool",[]],youme_setVideoNoFrameTimeout:["void",["int"]],youme_queryUsersVideoInfo:["int",["string"]],youme_setUsersVideoInfo:["int",["string"]],youme_openBeautify:["int",["bool"]],youme_beautifyChanged:["int",["double"]],youme_stretchFace:["int",["bool"]],youme_releaseMicSync:["bool",[]],youme_resumeMicSync:["bool",[]],youme_setMixVideoSize:["void",["int","int"]],youme_getCameraCount:["int",[]],youme_getCameraName:["int",["int",i.refType(i.types.char)]],youme_setOpenCameraId:["int",["int"]],youme_getVideoFrameNew:["char *",["string",i.refType("int"),i.refType("int"),i.refType("int"),i.refType("int")]],youme_videoEngineModelEnabled:["void",["bool"]]},g=r.Library(f,d);function E(){for(var e=g.youme_getCbMessage2();null!=e&&""!=e&&void 0!=e;){var t=i.readCString(e),n=JSON.parse(t),r=new Object,o=n.type;if(0===o){var s=n.event;switch(r.errorcode=n.error,r.channelid=n.channelid,r.param=n.param,s){case 0:l.emit("YOUME_EVENT_INIT_OK",r);break;case 1:l.emit("YOUME_EVENT_INIT_FAILED",r);break;case 2:l.emit("YOUME_EVENT_JOIN_OK",r);break;case 3:l.emit("YOUME_EVENT_JOIN_FAILED",r);break;case 5:l.emit("YOUME_EVENT_LEAVED_ALL",r);break;case 6:l.emit("YOUME_EVENT_PAUSED",r);break;case 7:l.emit("YOUME_EVENT_RESUMED",r);break;case 10:l.emit("YOUME_EVENT_RECONNECTING",r);break;case 11:l.emit("YOUME_EVENT_RECONNECTED",r);break;case 12:l.emit("YOUME_EVENT_REC_PERMISSION_STATUS",r);break;case 13:l.emit("YOUME_EVENT_BGM_STOPPED",r);break;case 14:l.emit("YOUME_EVENT_BGM_FAILED",r);break;case 16:l.emit("YOUME_EVENT_OTHERS_MIC_ON",r);break;case 17:l.emit("YOUME_EVENT_OTHERS_MIC_OFF",r);break;case 18:l.emit("YOUME_EVENT_OTHERS_SPEAKER_ON",r);break;case 19:l.emit("YOUME_EVENT_OTHERS_SPEAKER_OFF",r);break;case 20:l.emit("YOUME_EVENT_OTHERS_VOICE_ON",r);break;case 21:l.emit("YOUME_EVENT_OTHERS_VOICE_OFF",r);break;case 22:l.emit("YOUME_EVENT_MY_MIC_LEVEL",r);break;case 23:l.emit("YOUME_EVENT_MIC_CTR_ON",r);break;case 24:l.emit("YOUME_EVENT_MIC_CTR_OFF",r);break;case 25:l.emit("YOUME_EVENT_SPEAKER_CTR_ON",r);break;case 26:l.emit("YOUME_EVENT_SPEAKER_CTR_OFF",r);break;case 27:l.emit("YOUME_EVENT_LISTEN_OTHER_ON",r);break;case 28:l.emit("YOUME_EVENT_LISTEN_OTHER_OFF",r);break;case 29:l.emit("YOUME_EVENT_LOCAL_MIC_ON",r);break;case 30:l.emit("YOUME_EVENT_LOCAL_MIC_OFF",r);break;case 31:l.emit("YOUME_EVENT_LOCAL_SPEAKER_ON",r);break;case 32:l.emit("YOUME_EVENT_LOCAL_SPEAKER_OFF",r);break;case 60:l.emit("YOUME_EVENT_SEND_MESSAGE_RESULT",r);break;case 61:l.emit("YOUME_EVENT_MESSAGE_NOTIFY",r);break;case 64:l.emit("YOUME_EVENT_KICK_RESULT",r);break;case 65:l.emit("YOUME_EVENT_KICK_NOTIFY",r);break;case 66:l.emit("YOUME_EVENT_FAREND_VOICE_LEVEL",r);break;case 67:l.emit("YOUME_EVENT_OTHERS_BE_KICKED",r);break;case 200:l.emit("YOUME_EVENT_OTHERS_VIDEO_ON",r);break;case 204:l.emit("YOUME_EVENT_MASK_VIDEO_BY_OTHER_USER",r);break;case 205:l.emit("YOUME_EVENT_RESUME_VIDEO_BY_OTHER_USER",r);break;case 206:l.emit("YOUME_EVENT_MASK_VIDEO_FOR_USER",r);break;case 207:l.emit("YOUME_EVENT_RESUME_VIDEO_FOR_USER",r);break;case 208:l.emit("YOUME_EVENT_OTHERS_VIDEO_SHUT_DOWN",r);break;case 209:l.emit("YOUME_EVENT_OTHERS_VIDEO_INPUT_START",r);break;case 210:l.emit("YOUME_EVENT_OTHERS_VIDEO_INPUT_STOP",r);break;case 211:l.emit("YOUME_EVENT_MEDIA_DATA_ROAD_PASS",r);break;case 212:l.emit("YOUME_EVENT_MEDIA_DATA_ROAD_BLOCK",r);break;case 213:l.emit("YOUME_EVENT_QUERY_USERS_VIDEO_INFO",r);break;case 214:l.emit("YOUME_EVENT_SET_USERS_VIDEO_INFO",r);break;case 215:l.emit("YOUME_EVENT_LOCAL_VIDEO_INPUT_START",r);break;case 216:l.emit("YOUME_EVENT_LOCAL_VIDEO_INPUT_STOP",r);break;case 300:l.emit("YOUME_EVENT_OTHERS_DATA_ERROR",r);break;case 301:l.emit("YOUME_EVENT_OTHERS_NETWORK_BAD",r);break;case 302:l.emit("YOUME_EVENT_OTHERS_BLACK_FULL",r);break;case 303:l.emit("YOUME_EVENT_OTHERS_GREEN_FULL",r);break;case 304:l.emit("YOUME_EVENT_OTHERS_BLACK_BORDER",r);break;case 305:l.emit("YOUME_EVENT_OTHERS_GREEN_BORDER",r);break;case 306:l.emit("YOUME_EVENT_OTHERS_BLURRED_SCREEN",r);break;case 307:l.emit("YOUME_EVENT_OTHERS_ENCODER_ERROR",r);break;case 308:l.emit("YOUME_EVENT_OTHERS_DECODER_ERROR",r);break;case 400:l.emit("YOUME_EVENT_CAMERA_DEVICE_CONNECT",r);break;case 401:l.emit("YOUME_EVENT_CAMERA_DEVICE_DISCONNECT",r)}}else 1===o?(r.requestid=n.requestid,r.errorcode=n.error,r.query=n.query,r.result=n.result,l.emit("onRequestRestAPI",r)):2===o?(r.channelid=n.channelid,r.isUpdate=n.isUpdate,r.memchange=n.memchange,l.emit("onMemberChange",r)):3===o?(r.bc=n.bc,r.channelid=n.channelid,r.param1=n.param1,r.param2=n.param2,r.content=n.content,l.emit("onBroadcast",r)):4===o&&(r.avtype=n.avtype,r.userid=n.userid,r.value=n.value,l.emit("onAVStatistic",r));e=g.youme_freeCbMessage2(e)}}var _=null;let v={};var y;function M(e,t){0===t?(y=new h(e,new m(e.width,e.height)),v[e.id]=y):1===t&&(y=new c(e,new m(e.width,e.height)),v[e.id]=y)}e.exports={startGetMsg:function(){_&&clearInterval(_),_=setInterval(E,20)},emitter:l,init:function(e,t,n,r){return g.youme_init(e,t,n,r)},joinChannelSingleMode:function(e,t,n){return g.youme_joinChannelSingleMode(e,t,n)},setExternalInputMode:function(e){g.youme_setExternalInputMode(e)},setAVStatisticInterval:function(e){g.youme_setAVStatisticInterval(e)},setVideoNetResolution:function(e,t){return g.youme_setVideoNetResolution(e,t)},setVideoLocalResolution:function(e,t){return g.youme_setVideoLocalResolution(e,t)},getSDKVersion:function(){return g.youme_getSDKVersion()},unInit:function(){return _&&clearInterval(_),g.youme_unInit()},setVolume:function(e){g.youme_setVolume(e)},getVolume:function(){return g.youme_getVolume()},setMicrophoneMute:function(e){g.youme_setMicrophoneMute(e)},getMicrophoneMute:function(){return g.youme_getMicrophoneMute()},getSpeakerMute:function(){return g.youme_getSpeakerMute()},setSpeakerMute:function(e){g.youme_setSpeakerMute(e)},setOtherMicMute:function(e,t){return g.youme_setOtherMicMute(e,t)},setOtherSpeakerMute:function(e,t){return g.youme_setOtherSpeakerMute(e,t)},setListenOtherVoice:function(e,t){return g.youme_setListenOtherVoice(e,t)},setLogLevel:function(e,t){return g.youme_setLogLevel(e,t)},setServerRegion:function(e,t){g.youme_setServerRegion(e,t)},stopCapture:function(){return g.youme_stopCapture()},startCapture:function(){return g.youme_startCapture()},setTestConfig:function(e){g.youme_setTestConfig(e)},setOutputToSpeaker:function(e){return g.youme_setOutputToSpeaker(e)},setUseMobileNetworkEnabled:function(e){g.youme_setUseMobileNetworkEnabled(e)},getUseMobileNetworkEnabled:function(){return g.youme_getUseMobileNetworkEnabled()},setUserLogPath:function(e){return g.youme_setUserLogPath(e)},playBackgroundMusic:function(e,t){return g.youme_playBackgroundMusic(e,t)},pauseBackgroundMusic:function(){return g.youme_pauseBackgroundMusic()},resumeBackgroundMusic:function(){return g.youme_resumeBackgroundMusic()},stopBackgroundMusic:function(){return g.youme_stopBackgroundMusic()},setBackgroundMusicVolume:function(e){return g.youme_setBackgroundMusicVolume(e)},setHeadsetMonitorOn:function(e,t){return g.youme_setHeadsetMonitorOn(e,t)},setReverbEnabled:function(e){return g.youme_setReverbEnabled(e)},setVadCallbackEnabled:function(e){return g.youme_setVadCallbackEnabled(e)},setMicLevelCallback:function(e){return g.youme_setMicLevelCallback(e)},setFarendVoiceLevelCallback:function(e){return g.youme_setFarendVoiceLevelCallback(e)},setReleaseMicWhenMute:function(e){return g.youme_setReleaseMicWhenMute(e)},pauseChannel:function(){return g.youme_pauseChannel()},resumeChannel:function(){return g.youme_resumeChannel()},setRecordingTimeMs:function(e){g.youme_setRecordingTimeMs(e)},setPlayingTimeMs:function(e){g.youme_setPlayingTimeMs(e)},requestRestApi:function(e,t,n){return g.youme_requestRestApi(e,t,n)},getChannelUserList:function(e,t,n){return g.youme_getChannelUserList(e,t,n)},setUserRole:function(e){return g.youme_setUserRole(e)},getUserRole:function(){return g.youme_getUserRole()},isBackgroundMusicPlaying:function(){return g.youme_isBackgroundMusicPlaying()},isInited:function(){return g.youme_isInited()},isInChannel:function(e){return g.youme_isInChannel(e)},sendMessage:function(e,t,n){return g.youme_sendMessage(e,t,n)},inputAudioFrame:function(e,t,n){return g.youme_inputAudioFrame(e,t,n)},inputVideoFrame:function(e,t,n,r,i,o,s,u){return g.youme_inputVideoFrame(e,t,n,r,i,o,s,u)},getVideoFrame:function(e,t,n,r){return g.youme_getVideoFrame(e,t,n,r)},setVideoCallback:function(){return g.youme_setVideoCallback("")},setVideoFps:function(e){return g.youme_setVideoFps(e)},switchCamera:function(){return g.youme_switchCamera()},setExternalInputSampleRate:function(e,t){return g.youme_setExternalInputSampleRate(e,t)},setVideoNetResolutionForSecond:function(e,t){return g.youme_setVideoNetResolutionForSecond(e,t)},setVideoCodeBitrateForSecond:function(e,t){g.youme_setVideoCodeBitrateForSecond(e,t)},getCurrentVideoCodeBitrate:function(){return g.youme_getCurrentVideoCodeBitrate()},setVideoHardwareCodeEnable:function(e){g.youme_setVideoHardwareCodeEnable(e)},getVideoHardwareCodeEnable:function(){return g.youme_getVideoHardwareCodeEnable()},setVideoNoFrameTimeout:function(e){return g.youme_setVideoNoFrameTimeout(e)},queryUsersVideoInfo:function(e){return g.youme_queryUsersVideoInfo(e)},setUsersVideoInfo:function(e){return g.youme_setUsersVideoInfo(e)},openBeautify:function(e){return g.youme_openBeautify(e)},beautifyChanged:function(e){return g.youme_beautifyChanged(e)},stretchFace:function(e){return g.youme_stretchFace(e)},releaseMicSync:function(){return g.youme_releaseMicSync()},resumeMicSync:function(){return g.youme_resumeMicSync()},setToken:function(e){g.youme_setToken(e)},setAudioQuality:function(e){g.youme_setAudioQuality(e)},stopInputVideoFrame:function(){return g.youme_stopInputVideoFrame()},leaveChannelAll:function(){return v={},g.youme_leaveChannelAll()},setAutoSendStatus:function(e){g.youme_setAutoSendStatus(e)},setServerMode:function(e){g.youme_setServerMode(e)},kickOtherFromChannel:function(e,t,n){return g.youme_kickOtherFromChannel(e,t,n)},openVideoEncoder:function(e){return g.youme_openVideoEncoder(e)},resetCamera:function(){return g.youme_resetCamera()},setCaptureFrontCameraEnable:function(e){return g.youme_setCaptureFrontCameraEnable(e)},maskVideoByUserId:function(e,t){return g.youme_maskVideoByUserId(e,t)},setMixVideoSize:function(e,t){g.youme_setMixVideoSize(e,t)},getCameraCount:function(){return g.youme_getCameraCount()},getCameraName:function(e){var t=new Buffer(100);t.type=i.types.CString;var n=g.youme_getCameraName(e,t);return t.slice(0,n).toString()},setOpenCameraId:function(e){return g.youme_setOpenCameraId(e)},getVideoFrameNew:function(e,t,n,r,i){return g.youme_getVideoFrameNew(e,t,n,r,i)},videoEngineModelEnabled:function(e){g.youme_videoEngineModelEnabled(e)},updateCanvas:function(e,t){var n=document.getElementById(t);if(void 0!==n&&null!==n){var r=i.alloc("int",0),o=i.alloc("int",12),s=i.alloc("int",12),u=i.alloc("int",1),a=g.youme_getVideoFrameNew(e,r,o,s,u),l=r.deref();if(0!==l){o=i.deref(o),s=i.deref(s);var c=i.reinterpret(a,l);u=i.deref(u);var h=new Uint8Array(c),m=v[n.id];void 0!==m&&m.fmt===u?m.decode(h,o,s):M(n,u),h=null}}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(39),i=n(20),o=n(21),s=null,u=null,a=null,l=null,c=null,h=null,m=null,f=null,p=null,d=null,g=null,E={},_={},v={},y={};function M(e){return e&&"function"==typeof e}var T=function(){function e(){}return e.getInstance=function(){return this._instance||r.startGetMsg(),this._instance||(this._instance=new e)},e.setJSLogLevel=function(e){o.YMLogUtils.setLogLevel(e)},e.getJSLogLevel=function(){return o.YMLogUtils.getLogLevel()},e.prototype.init=function(e,t,n,i,o){M(o)&&(s=o);var u=r.init(e,t,n,i);return 0!==u&&M(o)&&o(u),u},e.prototype.uninit=function(){return r.uninit()},e.prototype.joinChannelSingleMode=function(e,t,n,i){M(i)&&(u=i);var o=r.joinChannelSingleMode(e,t,n);return 0!==o&&M(i)&&i(o),o},e.prototype.leaveChannelAll=function(e){e&&(a=e);var t=r.leaveChannelAll();return 0!==t&&M(e)&&e(t),t},e.prototype.setMicrophoneMute=function(e,t){t&&(e?c=t:l=t),r.setMicrophoneMute(e)},e.prototype.getMicrophoneMute=function(){return r.getMicrophoneMute()},e.prototype.getSpeakerMute=function(){return r.getSpeakerMute()},e.prototype.setSpeakerMute=function(e,t){t&&(e?m=t:h=t),r.setSpeakerMute(e)},e.prototype.stopCapture=function(e){M(e)&&(p=e);var t=r.stopCapture();return 0!==t&&M(e)&&e(t),t},e.prototype.startCapture=function(e){M(e)&&(f=e);var t=r.startCapture();return 0!==t&&M(e)&&e(t),t},e.prototype.setExternalInputMode=function(e){r.setExternalInputMode(e)},e.prototype.setAVStatisticInterval=function(e){r.setAVStatisticInterval(e)},e.prototype.setVideoLocalResolution=function(e,t){return r.setVideoLocalResolution(e,t)},e.prototype.setVideoNetResolution=function(e,t){return r.setVideoNetResolution(e,t)},e.prototype.setMixVideoSize=function(e,t){r.setMixVideoSize(e,t)},e.prototype.videoEngineModelEnabled=function(e){r.videoEngineModelEnabled(e)},e.prototype.getCameraCount=function(){return r.getCameraCount()},e.prototype.getCameraName=function(e){return r.getCameraName(e)},e.prototype.setOpenCameraId=function(e){return r.setOpenCameraId(e)},e.prototype.setVideoCallback=function(){return r.setVideoCallback()},e.prototype.setAutoSendStatus=function(e){r.setAutoSendStatus(e)},e.prototype.setVolume=function(e){r.setVolume(e)},e.prototype.getVolume=function(){return r.getVolume()},e.prototype.getVideoFrame=function(e,t,n,i){return r.getVideoFrame(e,t,n,i)},e.prototype.getVideoFrameNew=function(e,t,n,i,o){return r.getVideoFrameNew(e,t,n,i,o)},e.prototype.pauseChannel=function(e){M(e)&&(d=e);var t=r.pauseChannel();return 0!==t&&M(e)&&e(t),t},e.prototype.resumeChannel=function(e){M(e)&&(g=e);var t=r.resumeChannel();return 0!==t&&M(e)&&e(t),t},e.prototype.maskVideoByUserId=function(e,t,n){var i=r.maskVideoByUserId(e,t,function(r,o){0===i?n&&(t?E[e]=n:_[e]=n):M(n)&&n(i)});return i},e.prototype.getSDKVersion=function(){return r.getSDKVersion()},e.prototype.setToken=function(e){r.setToken(e)},e.prototype.setAudioQuality=function(e){r.setAudioQuality(e)},e.prototype.setOtherMicMute=function(e,t){return r.setOtherMicMute(e,t)},e.prototype.setOtherSpeakerMute=function(e,t){return r.setOtherSpeakerMute(e,t)},e.prototype.setListenOtherVoice=function(e,t){return r.setListenOtherVoice(e,t)},e.prototype.setLogLevel=function(e,t){return r.setLogLevel(e,t)},e.prototype.setServerRegion=function(e,t){r.setServerRegion(e,t)},e.prototype.setTestConfig=function(e){r.setTestConfig(e)},e.prototype.setOutputToSpeaker=function(e){return r.setOutputToSpeaker(e)},e.prototype.setUseMobileNetworkEnabled=function(e){r.setUseMobileNetworkEnabled(e)},e.prototype.getUseMobileNetworkEnabled=function(){return r.getUseMobileNetworkEnabled()},e.prototype.setUserLogPath=function(e){return r.setUserLogPath(e)},e.prototype.playBackgroundMusic=function(e,t){return r.playBackgroundMusic(e,t)},e.prototype.pauseBackgroundMusic=function(){return r.pauseBackgroundMusic()},e.prototype.resumeBackgroundMusic=function(){return r.resumeBackgroundMusic()},e.prototype.stopBackgroundMusic=function(){return r.stopBackgroundMusic()},e.prototype.setBackgroundMusicVolume=function(e){return r.setBackgroundMusicVolume(e)},e.prototype.setHeadsetMonitorOn=function(e,t){return r.setHeadsetMonitorOn(e,t)},e.prototype.setReverbEnabled=function(e){return r.setReverbEnabled(e)},e.prototype.setVadCallbackEnabled=function(e){return r.setVadCallbackEnabled(e)},e.prototype.setMicLevelCallback=function(e){return r.setMicLevelCallback(e)},e.prototype.setFarendVoiceLevelCallback=function(e){return r.setFarendVoiceLevelCallback(e)},e.prototype.setReleaseMicWhenMute=function(e){return r.setReleaseMicWhenMute(e)},e.prototype.setRecordingTimeMs=function(e){r.setRecordingTimeMs(e)},e.prototype.setPlayingTimeMs=function(e){r.setPlayingTimeMs(e)},e.prototype.setServerMode=function(e){r.setServerMode(e)},e.prototype.requestRestApi=function(e,t,n){var o=i.alloc(i.types.ulonglong),s=r.requestRestApi(e,t,o);return 0!==s?(M(n)&&n(s),-1):(M(n)&&(v[i.deref(o)]=n),i.deref(o))},e.prototype.getChannelUserList=function(e,t,n){return r.getChannelUserList(e,t,n)},e.prototype.setUserRole=function(e){return r.setUserRole(e)},e.prototype.getUserRole=function(){return r.getUserRole()},e.prototype.isBackgroundMusicPlaying=function(){return r.isBackgroundMusicPlaying()},e.prototype.isInited=function(){return r.isInited()},e.prototype.isInChannel=function(e){return r.isInChannel(e)},e.prototype.sendMessage=function(e,t,n){var o=i.alloc(i.types.ulonglong),s=r.sendMessage(e,t,o);return 0!==s?(M(n)&&n(s),-1):(M(n)&&(y[i.deref(o)]=n),i.deref(o))},e.prototype.kickOtherFromChannel=function(e,t,n){return r.kickOtherFromChannel(e,t,n)},e.prototype.openVideoEncoder=function(e){return r.openVideoEncoder(e)},e.prototype.inputAudioFrame=function(e,t,n){return r.inputAudioFrame(e,t,n)},e.prototype.inputVideoFrame=function(e,t,n,i,o,s,u,a){return r.inputVideoFrame(e,t,n,i,o,s,u,a)},e.prototype.stopInputVideoFrame=function(){return r.stopInputVideoFrame()},e.prototype.setVideoFps=function(e){return r.setVideoFps(e)},e.prototype.switchCamera=function(){return r.switchCamera()},e.prototype.resetCamera=function(){return r.resetCamera()},e.prototype.setCaptureFrontCameraEnable=function(e){return r.setCaptureFrontCameraEnable(e)},e.prototype.setExternalInputSampleRate=function(e,t){return r.setExternalInputSampleRate(e,t)},e.prototype.setVideoCodeBitrateForSecond=function(e,t){r.setVideoCodeBitrateForSecond(e,t)},e.prototype.getCurrentVideoCodeBitrate=function(){return r.getCurrentVideoCodeBitrate()},e.prototype.setVideoHardwareCodeEnable=function(e){r.setVideoHardwareCodeEnable(e)},e.prototype.getVideoHardwareCodeEnable=function(){return r.getVideoHardwareCodeEnable()},e.prototype.setVideoNoFrameTimeout=function(e){return r.setVideoNoFrameTimeout(e)},e.prototype.queryUsersVideoInfo=function(e){return r.queryUsersVideoInfo(e)},e.prototype.setUsersVideoInfo=function(e){return r.setUsersVideoInfo(e)},e.prototype.openBeautify=function(e){return r.openBeautify(e)},e.prototype.beautifyChanged=function(e){return r.beautifyChanged(e)},e.prototype.stretchFace=function(e){return r.stretchFace(e)},e.prototype.releaseMicSync=function(){return r.releaseMicSync()},e.prototype.resumeMicSync=function(){return r.resumeMicSync()},e.prototype.updateCanvas=function(e,t){r.updateCanvas(e,t)},e.prototype.on=function(e,t){M(t)?r.emitter.on(e,t):o.YMLogUtils.LOGE("param error! sencond param should be a function!, please check your code")},e}();t.default=T,r.emitter.on("YOUME_EVENT_INIT_OK",function(e){o.YMLogUtils.LOGI("INIT_OK",e),M(s)&&(s(e.errorcode,e),s=null)}),r.emitter.on("YOUME_EVENT_INIT_FAILED",function(e){o.YMLogUtils.LOGI("INIT_FAILED",e),M(s)&&(s(e.errorcode,e),s=null)}),r.emitter.on("YOUME_EVENT_JOIN_OK",function(e){o.YMLogUtils.LOGI("JOIN_OK",e),M(u)&&(u(e.errorcode,e),u=null)}),r.emitter.on("YOUME_EVENT_JOIN_FAILED",function(e){o.YMLogUtils.LOGI("JOIN_FAILED",e),M(u)&&(u(e.errorcode,e),u=null)}),r.emitter.on("YOUME_EVENT_LEAVED_ALL",function(e){o.YMLogUtils.LOGI("LEAVED_ALL",e),M(a)&&(a(e.errorcode,e),a=null)}),r.emitter.on("YOUME_EVENT_LOCAL_MIC_ON",function(e){o.YMLogUtils.LOGI("LOCAL_MIC_ON",e),M(l)&&(l(e.errorcode,e),l=null)}),r.emitter.on("YOUME_EVENT_LOCAL_MIC_OFF",function(e){o.YMLogUtils.LOGI("LOCAL_MIC_OFF",e),M(c)&&(c(e.errorcode,e),c=null)}),r.emitter.on("YOUME_EVENT_LOCAL_SPEAKER_ON",function(e){o.YMLogUtils.LOGI("LOCAL_SPEAKER_ON",e),M(h)&&(h(e.errorcode,e),h=null)}),r.emitter.on("YOUME_EVENT_LOCAL_SPEAKER_OFF",function(e){o.YMLogUtils.LOGI("LOCAL_SPEAKER_OFF",e),M(m)&&(m(e.errorcode,e),m=null)}),r.emitter.on("YOUME_EVENT_LOCAL_VIDEO_INPUT_START",function(e){o.YMLogUtils.LOGI("VIDEO_INPUT_START",e),M(f)&&(f(e.errorcode,e),f=null)}),r.emitter.on("YOUME_EVENT_LOCAL_VIDEO_INPUT_STOP",function(e){o.YMLogUtils.LOGI("VIDEO_INPUT_STOP",e),M(p)&&(p(e.errorcode,e),p=null)}),r.emitter.on("YOUME_EVENT_PAUSED",function(e){o.YMLogUtils.LOGI("YOUME_EVENT_PAUSED",e),M(d)&&(d(e.errorcode,e),d=null)}),r.emitter.on("YOUME_EVENT_RESUMED",function(e){o.YMLogUtils.LOGI("YOUME_EVENT_RESUMED",e),M(g)&&(g(e.errorcode,e),g=null)}),r.emitter.on("YOUME_EVENT_MASK_VIDEO_FOR_USER",function(e){o.YMLogUtils.LOGI("MASK_VIDEO_FOR_USER",e),M(E[e.param])&&(E[e.param](e.errorcode,e),delete E[e.param])}),r.emitter.on("YOUME_EVENT_RESUME_VIDEO_FOR_USER",function(e){o.YMLogUtils.LOGI("RESUME_VIDEO_FOR_USER",e),M(_[e.param])&&(_[e.param](e.errorcode,e),delete _[e.param])}),r.emitter.on("YOUME_EVENT_SEND_MESSAGE_RESULT",function(e){o.YMLogUtils.LOGI("SEND_MESSAGE_RESULT",e),M(y[e.param])&&(y[e.param](e.errorcode,e),delete y[e.param])}),r.emitter.on("onRequestRestAPI",function(e){o.YMLogUtils.LOGI("onRequestRestAPI",e),M(v[e.requestid])&&(v[e.requestid](e.errorcode,e),delete v[e.requestid])})}]).default;